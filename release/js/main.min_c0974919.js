var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},__extends=function(e,t){function n(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__assign=Object.assign||function(e){for(var t,n=1,r=arguments.length;r>n;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},__rest=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},__decorate=function(e,t,n,r){var i,o=arguments.length,a=3>o?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(3>o?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__param=function(e,t){return function(n,r){t(n,r,e)}},__metadata=function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},__awaiter=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,o){function a(e){try{l(r.next(e))}catch(t){o(t)}}function s(e){try{l(r["throw"](e))}catch(t){o(t)}}function l(e){e.done?n(e.value):i(e.value).then(a,s)}l((r=r.apply(e,t||[])).next())})},__generator=function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;l;)try{if(i=1,o&&(a=2&n[0]?o["return"]:n[0]?o["throw"]||((a=o["return"])&&a.call(o),0):o.next)&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[2&n[0],a.value]),n[0]){case 0:case 1:a=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,o=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(a=l.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){l=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){l.label=n[1];break}if(6===n[0]&&l.label<a[1]){l.label=a[1],a=n;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(n);break}a[2]&&l.ops.pop(),l.trys.pop();continue}n=t.call(e,l)}catch(r){n=[6,r],o=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,a,s,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),"throw":n(1),"return":n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},__exportStar=function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||__createBinding(t,e,n)},__createBinding=Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]},__values=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},__read=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-->0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(i)throw i.error}}return a},__spread=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e},__spreadArrays=function(){for(var e=0,t=0,n=arguments.length;n>t;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;n>t;t++)for(var o=arguments[t],a=0,s=o.length;s>a;a++,i++)r[i]=o[a];return r},__await=function(e){return this instanceof __await?(this.v=e,this):new __await(e)},__asyncGenerator=function(e,t,n){function r(e){c[e]&&(u[e]=function(t){return new Promise(function(n,r){f.push([e,t,n,r])>1||i(e,t)})})}function i(e,t){try{o(c[e](t))}catch(n){l(f[0][3],n)}}function o(e){e.value instanceof __await?Promise.resolve(e.value.v).then(a,s):l(f[0][2],e)}function a(e){i("next",e)}function s(e){i("throw",e)}function l(e,t){e(t),f.shift(),f.length&&i(f[0][0],f[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var u,c=n.apply(e,t||[]),f=[];return u={},r("next"),r("throw"),r("return"),u[Symbol.asyncIterator]=function(){return this},u},__asyncDelegator=function(e){function t(t,i){n[t]=e[t]?function(n){return(r=!r)?{value:__await(e[t](n)),done:"return"===t}:i?i(n):n}:i}var n,r;return n={},t("next"),t("throw",function(e){throw e}),t("return"),n[Symbol.iterator]=function(){return this},n},__asyncValues=function(e){function t(t){r[t]=e[t]&&function(r){return new Promise(function(i,o){r=e[t](r),n(i,o,r.done,r.value)})}}function n(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=e[Symbol.asyncIterator];return i?i.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),r={},t("next"),t("throw"),t("return"),r[Symbol.asyncIterator]=function(){return this},r)},__makeTemplateObject=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},__setModuleDefault=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e["default"]=t},__importStar=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&__createBinding(t,e,n);return __setModuleDefault(t,e),t},__importDefault=function(e){return e&&e.__esModule?e:{"default":e}},__classPrivateFieldGet=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},__classPrivateFieldSet=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},__reflect=function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n};!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(r,i,function(t){return e[t]}.bind(null,i));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){n(1),n(2),n(3),n(4),n(0),n(5),n(6),n(7),n(8),n(9),n(10),n(11),n(12),n(13),n(14),n(15),n(16),n(17),n(18),n(19),n(20),n(21),n(22),n(23),n(24),n(25),n(26),n(27),n(28),n(29),n(30),n(31),n(32),n(33),n(34),n(35),n(36),n(37),n(38),n(39),n(40),n(41),n(42),n(43),n(44),n(45),n(46),n(47),n(48),n(49),n(50),n(51),n(52),n(53),n(54),n(55),n(56),n(57),n(58),n(59),n(60),n(61),n(62),n(63);var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(e){}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()};var t=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",t),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.runGame()["catch"](function(e){console.log(e)})},t.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(n){switch(n.label){case 0:return[4,this.loadResource()];case 1:return n.sent(),this.createGameScene(),[4,RES.getResAsync("description_json")];case 2:return e=n.sent(),this.startAnimation(e),[4,platform.login()];case 3:return n.sent(),[4,platform.getUserInfo()];case 4:return t=n.sent(),console.log(t),[2]}})})},t.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,4,,5]),e=new LoadingUI,this.stage.addChild(e),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return n.sent(),[4,this.loadTheme()];case 2:return n.sent(),[4,RES.loadGroup("preload",0,e)];case 3:return n.sent(),this.stage.removeChild(e),[3,5];case 4:return t=n.sent(),console.error(t),[3,5];case 5:return[2]}})})},t.prototype.loadTheme=function(){var e=this;return new Promise(function(t,n){var r=new eui.Theme("resource/default.thm.json",e.stage);r.addEventListener(eui.UIEvent.COMPLETE,function(){t()},e)})},t.prototype.createGameScene=function(){console.log(egret.Capabilities.os),LifecycleCallback.regist();var e=RES.getRes("bgcell2_png"),t=new egret.Bitmap(e);t.fillMode=egret.BitmapFillMode.REPEAT,t.width=this.width,t.height=this.height,t.alpha=.5,this.addChild(t),this.toTitle()},t.prototype.toTitle=function(e){void 0===e&&(e=null),this.currentScene&&this.currentScene.dispose();var t=new TitleScene(this.stage);this.stage.addChild(t),t.addEventListener(PlayEvents.START,this.toStage,this),this.currentScene=t},t.prototype.toStage=function(e){void 0===e&&(e=null),this.currentScene&&this.currentScene.dispose();var t,n=e.data.mode;switch(n){case GameMode.TIME_ATTACK:t=new StageScene(this.stage);break;case GameMode.PRACTICE:t=new PracticeScene(this.stage);break;case GameMode.INFINITE:t=new InfiniteScene(this.stage)}this.stage.addChild(t),this.currentScene=t,t.once(PlayEvents.BACK_2_TITLE,this.toTitle,this),t.startPlay()},t.prototype.createBitmapByName=function(e){var t=new egret.Bitmap,n=RES.getRes(e);return t.texture=n,t},t.prototype.startAnimation=function(e){},t}(eui.UILayer);window.Main=r,__reflect(r.prototype,"Main",[])},function(e,t){var n=function(){function e(){}return e.prototype.getAsset=function(e,t,n){function r(r){t.call(n,r,e)}if(RES.hasRes(e)){var i=RES.getRes(e);i?r(i):RES.getResAsync(e,r,this)}else RES.getResByUrl(e,r,this,RES.ResourceItem.TYPE_IMAGE)},e}();window.AssetAdapter=n,__reflect(n.prototype,"AssetAdapter",["eui.IAssetAdapter"])},function(e,t){var n=function(){function e(){}return e.BUFF_GAIN="BUFF_GAIN",e.BUFF_LOSE="BUFF_LOSE",e.PLAYER_SHOT="PLAYER_SHOT",e.RECYCLEABLE="RECYCLEABLE",e.CLEAN_ENEMY="CLEAN_ENEMY",e.DRIFT_MISS="DRIFT_MISS",e.DRIFT_BREAK="DRIFT_BREAK",e.DRIFT_GET="DRIFT_GET",e.START="START",e.RETRY="RETRY",e.CLEAR="CLEAR",e.GAME_OVER="GAME_OVER",e.RANK_UP="RANK_UP",e.OVER_BORDER="OVER_BORDER",e.CLOSE_DESCRIPT="CLOSE_DESCRIPT",e.BACK_2_TITLE="BACK_2_TITLE",e}();window.PlayEvents=n,__reflect(n.prototype,"PlayEvents",[]);var r;!function(e){e[e.TIME_ATTACK=0]="TIME_ATTACK",e[e.INFINITE=1]="INFINITE",e[e.PRACTICE=2]="PRACTICE"}(r||(r={})),window.GameMode=r;var i;!function(e){e[e.ROOKIE=0]="ROOKIE",e[e.NORMAL=1]="NORMAL",e[e.ELITE=2]="ELITE",e[e.EXTREME=3]="EXTREME"}(i||(i={})),window.AIType=i;var o;!function(e){e[e.SLIGHT_AVOID=0]="SLIGHT_AVOID",e[e.AVOID=1]="AVOID",e[e.DASH_AVOID=2]="DASH_AVOID",e[e.TRACE=3]="TRACE",e[e.DASH_TRACE=4]="DASH_TRACE",e[e.GETBUFF=5]="GETBUFF",e[e.SPARE=6]="SPARE",e[e.IMPACT=7]="IMPACT",e[e.BARRAGE=8]="BARRAGE"}(o||(o={})),window.AIActType=o;var a;!function(e){e[e.BULLET_BOOST_BIG=0]="BULLET_BOOST_BIG",e[e.BULLET_BOOST_3DIRECT=1]="BULLET_BOOST_3DIRECT",e[e.BULLET_BOOST_5DIRECT=2]="BULLET_BOOST_5DIRECT",e[e.BULLECT_BOOST_PLUS2DIRECT=3]="BULLECT_BOOST_PLUS2DIRECT",e[e.BARRIER=4]="BARRIER",e[e.SUB_PLANE=5]="SUB_PLANE",e[e.INF_DASH=6]="INF_DASH",e[e.DASH_INVINS=7]="DASH_INVINS",e[e.HIGH_SPEED=8]="HIGH_SPEED",e[e.HP_RECOVER=9]="HP_RECOVER",e[e.CLEAN_ENEMY=10]="CLEAN_ENEMY",e[e.CONFUSE_ENEMY=11]="CONFUSE_ENEMY"}(a||(a={})),window.BuffType=a;var s=function(){function e(){}return e.LEFT=37,e.UP=38,e.RIGHT=39,e.DOWN=40,e.Z=90,e.X=88,e.C=67,e}();window.Keyboard=s,__reflect(s.prototype,"Keyboard",[])},function(e,t){var n=function(){function e(){}return e.random=function(e,t){return Math.random()*(t-e)+e},e.getMc=function(e,t){void 0===t&&(t=-1);var n=RES.getRes(e+"_json"),r=RES.getRes(e+"_png"),i=new egret.MovieClipDataFactory(n,r),o=new egret.MovieClip(i.generateMovieClipData());return o},e.loadImage=function(e,t,n,r){var i=new egret.ImageLoader;i.crossOrigin="anonymous",i.load(e),i.once(egret.Event.COMPLETE,n,t),i.once(egret.IOErrorEvent.IO_ERROR,r,t)},e.httpReq=function(e,t,n,r,i,o,a,s){"GET"==n&&(e=e+"?"+t);var l=new egret.HttpRequest;l.open(e,n),l.setRequestHeader("Accept","*/*"),s&&l.setRequestHeader("Authorization",s),l.setRequestHeader("Content-Type",a),"GET"==n?l.send():l.send(t),l.addEventListener(egret.Event.COMPLETE,i,r),null!=o&&(l.addEventListener(egret.IOErrorEvent.IO_ERROR,o,r),l.addEventListener(egret.HTTPStatusEvent.CLOSE,o,r))},e.Loaded=function(){window.parent.postMessage({isLoadComplete:!0,url:window.location.href},"*")},e}();window.GlobalMethod=n,__reflect(n.prototype,"GlobalMethod",[])},function(e,t){var n=function(e){function t(){var t=e.call(this)||this;return t.createView(),t}return __extends(t,e),t.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},t.prototype.onProgress=function(e,t){this.textField.text="Loading..."+e+"/"+t},t}(egret.Sprite);window.LoadingUI=n,__reflect(n.prototype,"LoadingUI",["RES.PromiseTaskReporter"])},function(e,t){var n=function(){function e(){}return e.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,{nickName:"username"}]})})},e.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e}();window.DebugPlatform=n,__reflect(n.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new n)},function(e,t){var n=function(){function e(){}return e.prototype.getTheme=function(e,t,n,r){function i(e){t.call(r,e)}function o(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),n.call(r))}var a=this;if("undefined"!=typeof generateEUI)egret.callLater(function(){t.call(r,generateEUI)},this);else if("undefined"!=typeof generateEUI2)RES.getResByUrl("resource/gameEui.json",function(e,n){window.JSONParseClass.setData(e),egret.callLater(function(){t.call(r,generateEUI2)},a)},this,RES.ResourceItem.TYPE_JSON);else if("undefined"!=typeof generateJSON)if(e.indexOf(".exml")>-1){var s=e.replace(".exml","_EUI.json");generateJSON.paths[e]?egret.callLater(function(){t.call(r,generateJSON.paths[e])},this):RES.getResByUrl(s,function(n){window.JSONParseClass.setData(n),egret.callLater(function(){t.call(r,generateJSON.paths[e])},a)},this,RES.ResourceItem.TYPE_JSON)}else egret.callLater(function(){t.call(r,generateJSON)},this);else RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),RES.getResByUrl(e,i,this,RES.ResourceItem.TYPE_TEXT)},e}();window.ThemeAdapter=n,__reflect(n.prototype,"ThemeAdapter",["eui.IThemeAdapter"])},function(e,t){var n=function(){function e(){}return e.GAME_TIME_MINUTES=5,e.ENEMY_DRIFT=!0,e.PLANE_CRASH=!1,e.PLANE_WIDTH=20,e.PLANE_HEIGHT=35,e.MAP_SIZE=8e3,e.SPEED={PlayerPlane:[6,12,18],EnemyPlane:[4,8,14],EliteEnemyPlane:[6,12,18],ExtremeEnemyPlane:[2,16,26]},e}();window.WorldData=n,__reflect(n.prototype,"WorldData",[])},function(e,t){var n=function(e){function t(t,n,r){void 0===r&&(r="");var i=e.call(this)||this;return i.type=t,i.duration=n,i.label=r,n>0&&(i.timer=new egret.Timer(n,1),i.timer.addEventListener(egret.TimerEvent.TIMER_COMPLETE,i.delBuff,i)),i}return __extends(t,e),t.prototype.onPause=function(){this.timer&&this.timer.stop()},t.prototype.onResume=function(){this.timer&&this.timer.start()},t.prototype.delBuff=function(e){void 0===e&&(e=null),this.owner.loseBuff(this.type),this.dispatchEvent(new egret.Event(PlayEvents.BUFF_LOSE)),this.timer&&this.timer.reset()},t.prototype.getType=function(){return this.type},t.prototype.startEffect=function(e){this.owner=e,this.timer&&this.timer.start()},t}(egret.EventDispatcher);window.Buff=n,__reflect(n.prototype,"Buff",[])},function(e,t){var n=function(e){function t(t){return void 0===t&&(t=3e3),e.call(this,BuffType.BARRIER,t,"★")||this}return __extends(t,e),t.prototype.startEffect=function(e){this.owner=e,this._barrier=e.barrier,this._barrier.energy=Barrier.MAX_ENERGY,this._barrier.lock(),this.timer&&this.timer.start()},t.prototype.delBuff=function(t){void 0===t&&(t=null),this._barrier.unlock(),e.prototype.delBuff.call(this,t)},t}(Buff);window.BarrierBuff=n,__reflect(n.prototype,"BarrierBuff",[])},function(e,t){var n=function(e){function t(t){return void 0===t&&(t=-1),e.call(this,BuffType.BULLET_BOOST_BIG,t,"B")||this}return __extends(t,e),t.prototype.startEffect=function(t){this.owner=t,t instanceof PlayerPlane?(t.bulletGenerator=BulletLV2.pool,t.bulletRange=BulletLV2.range):(t.bulletGenerator=EnemyBulletLV2.pool,t.bulletRange=EnemyBulletLV2.range),e.prototype.startEffect.call(this,t)},t.prototype.delBuff=function(t){void 0===t&&(t=null);var n=this.owner;n instanceof PlayerPlane?(n.bulletGenerator=Bullet.pool,n.bulletRange=Bullet.range):(n.bulletGenerator=EnemyBullet.pool,n.bulletRange=EnemyBullet.range),e.prototype.delBuff.call(this,t)},t}(Buff);window.BigBulletBuff=n,__reflect(n.prototype,"BigBulletBuff",[])},function(e,t){var n=function(e){function t(t){void 0===t&&(t=2e4);var n=e.call(this,BuffType.HIGH_SPEED,t,"S")||this;return n._add=8,n}return __extends(t,e),t.prototype.startEffect=function(e){this.owner=e;for(var t=this._add,n=0;n<e.gears.length;n++)e.gears[n]+=t;this.timer&&this.timer.start();var r=this.creatBmp();r.width=.2*e.width,r.height=4*r.width,e.addChild(r),r.x=-r.width/2,r.y=.3*r.height,this._jet=r},t.prototype.delBuff=function(t){void 0===t&&(t=null);for(var n=this._add,r=this.owner,i=0;i<r.gears.length;i++)r.gears[i]-=n;this._jet&&this._jet.parent&&this._jet.parent.removeChild(this._jet),e.prototype.delBuff.call(this,t)},t.prototype.creatBmp=function(){var e=new egret.Bitmap(RES.getRes("sheet_json#jetp"));return e},t}(Buff);window.BoostBuff=n,__reflect(n.prototype,"BoostBuff",[])},function(e,t){var n=function(){function e(e){this._plane=e,this._buffNum=0}return e.getBuffData=function(e){switch(e){case BuffType.BARRIER:return{type:e,defaultDuration:1e4,label:"★"};case BuffType.BULLET_BOOST_BIG:return{type:e,defaultDuration:6e4,label:"B"};case BuffType.BULLECT_BOOST_PLUS2DIRECT:return{type:e,defaultDuration:6e4,label:"+2"};case BuffType.SUB_PLANE:return{type:e,defaultDuration:15e3,label:"S"};case BuffType.HIGH_SPEED:return{type:e,defaultDuration:2e4,label:"S"};case BuffType.HP_RECOVER:return{type:e,defaultDuration:-1,label:"H"};case BuffType.CLEAN_ENEMY:return{type:e,defaultDuration:-1,label:"E"};case BuffType.CONFUSE_ENEMY:return{type:e,defaultDuration:2e4,label:"C"}}return null},e.prototype.getBuff=function(e,t){var n,r=this;switch(e){case BuffType.BARRIER:r.barrierBuff||r._buffNum++,r.barrierBuff=new BarrierBuff(t),n=r.barrierBuff;break;case BuffType.BULLET_BOOST_BIG:r.bigBulletBuff||r._buffNum++,r.bigBulletBuff=new BigBulletBuff(t),n=r.bigBulletBuff;break;case BuffType.BULLET_BOOST_3DIRECT:r.direction3BulletBuff||r._buffNum++,r.direction3BulletBuff=new Direction3BulletBuff(t),n=r.direction3BulletBuff;break;case BuffType.BULLET_BOOST_5DIRECT:r.direction5BulletBuff||r._buffNum++,r.direction5BulletBuff=new Direction5BulletBuff(t),n=r.direction5BulletBuff;break;case BuffType.BULLECT_BOOST_PLUS2DIRECT:r.directionPlus2BullectBuff||r._buffNum++,r.directionPlus2BullectBuff=new DirectionPlus2BullectBuff(t),n=r.directionPlus2BullectBuff;break;case BuffType.SUB_PLANE:r.subPlaneBuff||r._buffNum++,r.subPlaneBuff=new SubPlaneBuff(t),n=r.subPlaneBuff;break;case BuffType.HIGH_SPEED:r.boostBuff?r.boostBuff.delBuff():r._buffNum++,r.boostBuff=new BoostBuff(t),n=r.boostBuff;break;case BuffType.HP_RECOVER:return void new HPBuff(t).startEffect(r._plane);case BuffType.CLEAN_ENEMY:return void new ExplodeBuff(t).startEffect(r._plane);case BuffType.CONFUSE_ENEMY:if(!(r._plane instanceof PlayerPlane))return;r.confuseBuff?r.confuseBuff.delBuff():r._buffNum++,r.confuseBuff=new ConfuseBuff(t),n=r.confuseBuff}n&&(n.startEffect(r._plane),n.addEventListener(PlayEvents.BUFF_LOSE,r.loseBuff,r))},e.prototype.loseBuff=function(e){void 0===e&&(e=null);var t=e.target;switch(t.getType()){case BuffType.BARRIER:this.barrierBuff=null;break;case BuffType.BULLET_BOOST_BIG:this.bigBulletBuff=null;break;case BuffType.BULLET_BOOST_3DIRECT:this.direction3BulletBuff=null;break;case BuffType.BULLET_BOOST_5DIRECT:this.direction5BulletBuff=null;break;case BuffType.BULLECT_BOOST_PLUS2DIRECT:this.directionPlus2BullectBuff=null;break;case BuffType.SUB_PLANE:this.subPlaneBuff=null;break;case BuffType.HIGH_SPEED:this.boostBuff=null;break;case BuffType.CONFUSE_ENEMY:this.confuseBuff=null}this._buffNum--},e.prototype.loseBuff2=function(e){switch(e){case BuffType.BARRIER:this.barrierBuff&&this.barrierBuff.delBuff();break;case BuffType.BULLET_BOOST_BIG:this.bigBulletBuff&&this.bigBulletBuff.delBuff();break;case BuffType.BULLET_BOOST_3DIRECT:this.direction3BulletBuff&&this.direction3BulletBuff.delBuff();break;case BuffType.BULLET_BOOST_5DIRECT:this.direction5BulletBuff&&this.direction5BulletBuff.delBuff();break;case BuffType.BULLECT_BOOST_PLUS2DIRECT:this.directionPlus2BullectBuff&&this.directionPlus2BullectBuff.delBuff();break;case BuffType.SUB_PLANE:this.subPlaneBuff&&this.subPlaneBuff.delBuff();break;case BuffType.HIGH_SPEED:this.boostBuff&&this.boostBuff.delBuff();break;case BuffType.CONFUSE_ENEMY:this.confuseBuff&&this.confuseBuff.delBuff()}this._buffNum++},e.prototype.dispose=function(){var e=this;e.bigBulletBuff&&e.bigBulletBuff.delBuff(),e.dashInvinsibleBuff&&e.dashInvinsibleBuff.delBuff(),e.direction3BulletBuff&&e.direction3BulletBuff.delBuff(),e.direction5BulletBuff&&e.direction5BulletBuff.delBuff(),e.directionPlus2BullectBuff&&e.directionPlus2BullectBuff.delBuff(),e.barrierBuff&&e.barrierBuff.delBuff(),e.subPlaneBuff&&e.subPlaneBuff.delBuff(),e.boostBuff&&e.boostBuff.delBuff(),e.confuseBuff&&e.confuseBuff.delBuff()},e.prototype.onPause=function(){var e=this;e.bigBulletBuff&&e.bigBulletBuff.onPause(),e.dashInvinsibleBuff&&e.dashInvinsibleBuff.onPause(),e.direction3BulletBuff&&e.direction3BulletBuff.onPause(),e.direction5BulletBuff&&e.direction5BulletBuff.onPause(),e.directionPlus2BullectBuff&&e.directionPlus2BullectBuff.onPause(),e.barrierBuff&&e.barrierBuff.onPause(),e.subPlaneBuff&&e.subPlaneBuff.onPause(),e.confuseBuff&&e.confuseBuff.onPause()},e.prototype.onResume=function(){var e=this;e.bigBulletBuff&&e.bigBulletBuff.onResume(),e.dashInvinsibleBuff&&e.dashInvinsibleBuff.onResume(),e.direction3BulletBuff&&e.direction3BulletBuff.onResume(),e.direction5BulletBuff&&e.direction5BulletBuff.onResume(),e.directionPlus2BullectBuff&&e.directionPlus2BullectBuff.onResume(),e.barrierBuff&&e.barrierBuff.onResume(),e.subPlaneBuff&&e.subPlaneBuff.onResume(),e.confuseBuff&&e.confuseBuff.onResume()},Object.defineProperty(e.prototype,"buffNum",{get:function(){return this._buffNum},enumerable:!1,configurable:!0}),e}();window.BuffManager=n,__reflect(n.prototype,"BuffManager",[])},function(e,t){var n=function(e){function t(t){return void 0===t&&(t=2e4),e.call(this,BuffType.CONFUSE_ENEMY,t,"C")||this}return __extends(t,e),t.prototype.startEffect=function(e){if(this.owner=e,e instanceof PlayerPlane){var t=new egret.Event(PlayEvents.BUFF_GAIN);t.data={ty:this.type},e.dispatchEvent(t),console.log("敌机行为模式锁定为减速回旋停火"),this.timer&&this.timer.start()}},t.prototype.delBuff=function(e){void 0===e&&(e=null);var t=new egret.Event(PlayEvents.BUFF_LOSE);t.data={ty:this.type},this.owner.dispatchEvent(t),this.timer&&this.timer.reset(),console.log("敌机行为模式解锁")},t}(Buff);window.ConfuseBuff=n,__reflect(n.prototype,"ConfuseBuff",[])},function(e,t){var n=function(e){function t(t){return void 0===t&&(t=800),e.call(this,BuffType.DASH_INVINS,t,"")||this}return __extends(t,e),t}(Buff);window.DashInvinsibleBuff=n,__reflect(n.prototype,"DashInvinsibleBuff",[])},function(e,t){var n=function(e){function t(t){return void 0===t&&(t=-1),e.call(this,BuffType.BULLET_BOOST_3DIRECT,t,"+2")||this}return __extends(t,e),t.prototype.startEffect=function(e){this.owner=e,e.bulletDirections=[-45,0,45]},t}(Buff);window.Direction3BulletBuff=n,__reflect(n.prototype,"Direction3BulletBuff",[])},function(e,t){var n=function(e){function t(t){return void 0===t&&(t=-1),e.call(this,BuffType.BULLET_BOOST_5DIRECT,t,"+2")||this}return __extends(t,e),t.prototype.startEffect=function(e){this.owner=e,e.bulletDirections=[-135,-45,0,45,135]},t}(Buff);window.Direction5BulletBuff=n,__reflect(n.prototype,"Direction5BulletBuff",[])},function(e,t){var n=function(e){function t(t){return void 0===t&&(t=-1),e.call(this,BuffType.BULLECT_BOOST_PLUS2DIRECT,t,"+2")||this}return __extends(t,e),t.prototype.startEffect=function(t){e.prototype.startEffect.call(this,t),this.owner=t,1==t.bulletDirections.length?t.bulletDirections=[-45,0,45]:3==t.bulletDirections.length&&(t.bulletDirections=[-135,-45,0,45,135]),e.prototype.startEffect.call(this,t)},t.prototype.delBuff=function(t){void 0===t&&(t=null);var n=this.owner;5==n.bulletDirections.length?n.bulletDirections=[-45,0,45]:3==n.bulletDirections.length&&(n.bulletDirections=[0]),e.prototype.delBuff.call(this,t)},t}(Buff);window.DirectionPlus2BullectBuff=n,__reflect(n.prototype,"DirectionPlus2BullectBuff",[])},function(e,t){var n=function(e){function t(t){return void 0===t&&(t=-1),e.call(this,BuffType.CLEAN_ENEMY,t,"E")||this}return __extends(t,e),t.prototype.startEffect=function(e){if(this.owner=e,e instanceof PlayerPlane){var t=new egret.Event(PlayEvents.BUFF_GAIN);t.data={ty:this.type},e.dispatchEvent(t)}},t}(Buff);window.ExplodeBuff=n,__reflect(n.prototype,"ExplodeBuff",[])},function(e,t){var n=function(e){function t(t){return void 0===t&&(t=-1),e.call(this,BuffType.HP_RECOVER,t,"H")||this}return __extends(t,e),t.prototype.startEffect=function(e){e.HP=e.maxHP},t.prototype.delBuff=function(e){void 0===e&&(e=null)},t}(Buff);window.HPBuff=n,__reflect(n.prototype,"HPBuff",[])},function(e,t){var n=function(e){function t(t){return void 0===t&&(t=-1),e.call(this,BuffType.SUB_PLANE,t,"S")||this}return __extends(t,e),t.prototype.startEffect=function(t){e.prototype.startEffect.call(this,t),this.owner=t,this._subA=new SubPlane(t,"LEFT"),this._subB=new SubPlane(t,"RIGHT")},t.prototype.delBuff=function(t){void 0===t&&(t=null),this._subA.dispose(),this._subB.dispose(),e.prototype.delBuff.call(this,t)},t}(Buff);window.SubPlaneBuff=n,__reflect(n.prototype,"SubPlaneBuff",[])},function(e,t){var n=function(){function e(e,t){void 0===t&&(t=0),this.fps=egret.MainContext.instance.stage.frameRate,this.energy=t,this._p=e,this._filter=new egret.GlowFilter(16766720,1,10,10,1e3),this._on=!1}return e.prototype.boot=function(){if(0!=this._energy){var e=this._p;this._on=!0,e.filters?e.filters=e.filters.concat(this._filter):e.filters=[this._filter]}},e.prototype.shut=function(){for(var e=this._p,t=e.filters,n=this._filter,r=0;r<t.length;r++){var i=t[r];if(i==n){t.splice(r);break}}this._on=!1,e.filters=t},Object.defineProperty(e.prototype,"energy",{get:function(){return this._energy},set:function(e){var t=this;e=0>e?0:e,t._energy=e,t._reduceCount=0,0==e&&t._on&&t.shut()},enumerable:!1,configurable:!0}),e.prototype.reduceEnergyByHit=function(e){void 0===e&&(e=5);var t=this;0!=t._energy&&!t._lock&&t._on&&(t.energy-=e)},e.prototype.reduceEnergyByTime=function(){var e=this;0!=e._energy&&!e._lock&&e._on&&(e._reduceCount++,e._reduceCount==e.fps&&e.energy--)},Object.defineProperty(e.prototype,"isOn",{get:function(){return this._on},enumerable:!1,configurable:!0}),e.prototype.lock=function(){this._lock=!0},e.prototype.unlock=function(){this._lock=!1},e.MAX_ENERGY=100,e}();window.Barrier=n,__reflect(n.prototype,"Barrier",[])},function(e,t){var n=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.refreshPosition=function(){this.position=new egret.Point(this.x,this.y)},Object.defineProperty(t.prototype,"isActivated",{get:function(){return null!=this.parent},enumerable:!1,configurable:!0}),t}(egret.Sprite);window.CollisionObject=n,__reflect(n.prototype,"CollisionObject",[])},function(e,t){var n=function(e){function t(){var t=e.call(this)||this;return t.maxHP=1,t._stage=egret.MainContext.instance.stage,t.HP=t.maxHP,t}return __extends(t,e),t.prototype.hit=function(e){return this.HP-=e.planeDamage,!0},t.prototype.isDefeated=function(){return 0==this.HP},t}(CollisionObject);window.BaseCharacter=n,__reflect(n.prototype,"BaseCharacter",[])},function(e,t){var n=function(e){function t(){var t=e.call(this)||this;return t.pWidth=WorldData.PLANE_WIDTH,t.pHeight=WorldData.PLANE_HEIGHT,t.pColor=16777215,t.rotStep=2,t.shotSpeed=200,t.bulletDirections=[0],t.gears=[8,10,15],t.curGear=1,t.MAP_SIZE=WorldData.MAP_SIZE,t.checkOverBorderCount=0,t.maxCheckOverBorderCount=10,t.buffManager=new BuffManager(t),t.shotTimer=new egret.Timer(t.shotSpeed,1),t.moveData=new MoveData,t.barrier=new Barrier(t),t}return __extends(t,e),t.prototype.boot=function(){this.moveData.setData(0,this.speed)},t.prototype.onPause=function(){this.shotTimer.stop(),this.buffManager.onPause()},t.prototype.onResume=function(){this.shotTimer.start(),this.buffManager.onResume()},t.prototype.draw=function(){this.graphics.beginFill(this.pColor),this.graphics.moveTo(-this.pWidth,this.pHeight),this.graphics.lineTo(this.pWidth,this.pHeight),this.graphics.lineTo(0,-this.pHeight),this.graphics.endFill()},t.prototype.move=function(e,t){var n=this;n.rotation+=t*n.rotStep,n.curGear=e+1,n.moveData.setData(n.rotation,n.speed);var r=n.moveData.getDAxis(),i=r.dx,o=r.dy;n.x+=i,n.y+=o,n.checkIfOverBorder()},t.prototype.spin=function(e){var t=this;t.rotation+=e*t.rotStep,t.moveData.setData(t.rotation,t.speed)},t.prototype.shot=function(){var e=this;if(!e.shotTimer.running){for(var t=0;t<e.bulletDirections.length;t++){var n=e.bulletGenerator.getOne();n.x=e.x,n.y=e.y;var r=e.bulletDirections[t];n.setDirection(e.rotation+r),e.parent.addChild(n),n.shoot()}e.shotTimer.start()}},Object.defineProperty(t.prototype,"bulletGenerator",{get:function(){return this._bulletGenerator},set:function(e){this._bulletGenerator=e},enumerable:!1,configurable:!0}),t.prototype.setBuff=function(e,t){this.buffManager.getBuff(e,t)},t.prototype.loseBuff=function(e){},t.prototype.crash=function(){this.buffManager.dispose(),this.parent&&this.parent.removeChild(this)},t.prototype.refreshPosition=function(){e.prototype.refreshPosition.call(this),this._collisionPoints=[new egret.Point(this.x-this.pWidth,this.y),new egret.Point(this.x+this.pWidth,this.y),new egret.Point(this.x,this.y-this.pHeight),new egret.Point(this.x,this.y+this.pHeight)],this.barrier.reduceEnergyByTime()},Object.defineProperty(t.prototype,"collisionPoints",{get:function(){var e=this;return e._collisionPoints.map(function(t,n){return e.parent?e.parent.localToGlobal(t.x,t.y):t})},enumerable:!1,configurable:!0}),t.prototype.collisionCheck=function(e){for(var t=0,n=this.collisionPoints;t<n.length;t++){var r=n[t];if(e.hitTestPoint(r.x,r.y))return!0}return!1},Object.defineProperty(t.prototype,"speed",{get:function(){return this.gears[this.curGear]},enumerable:!1,configurable:!0}),t.prototype.hit=function(e){return this.barrier.isOn?(this.barrier.reduceEnergyByHit(e.barrierDamage),!1):(this.HP-=e.planeDamage,!0)},t.prototype.checkIfOverBorder=function(){var e=this;if(e.checkOverBorderCount<e.maxCheckOverBorderCount)return void e.checkOverBorderCount++;
e.checkOverBorderCount=0;var t="";if(e.x<=0?t="left":e.x>=e.MAP_SIZE?t="right":e.y<=0?t="top":e.y>=e.MAP_SIZE&&(t="bottom"),0!=t.length){var n=new egret.Event(PlayEvents.OVER_BORDER);n.data={d:t},e.dispatchEvent(n)}},t.prototype.bootBarrier=function(e){e?this.barrier.boot():this.barrier.shut()},Object.defineProperty(t.prototype,"isBarrier",{get:function(){return this.barrier.isOn},enumerable:!1,configurable:!0}),t}(BaseCharacter);window.BasePlane=n,__reflect(n.prototype,"BasePlane",[])},function(e,t){var n=function(){function e(e){this._arr=[],this._func=e}return e.prototype.getOne=function(){for(var e=null,t=0,n=this._arr;t<n.length;t++){var r=n[t];if(!r.activate){e=r;break}}return e||(e=this._func(),this._arr.push(e)),e.activate=!0,e},e.prototype.recycle=function(e){void 0===e&&(e=null);var t=e.target;t.activate=!1},e.prototype.dispose=function(){this._arr=null,this._func=null},e}();window.Pool=n,__reflect(n.prototype,"Pool",[])},function(e,t){var n=function(e){function t(n,r,i,o,a){void 0===n&&(n=20),void 0===r&&(r=16775885),void 0===i&&(i=0),void 0===o&&(o=30),void 0===a&&(a=t.range);var s=e.call(this)||this;return s._stage=egret.MainContext.instance.stage,s.activate=!1,s.size=n,s.color=r,s.distance=a,s.curDis=0,s.draw(),s.loadPartical(),s.moveData=new MoveData,s.moveData.setData(i,o),s._planeDamage=1,s._barrierDamage=10,s}return __extends(t,e),t.prototype.setDirection=function(e,t){void 0===e&&(e=0),void 0===t&&(t=-1),-1==t&&(t=this.moveData.speed),this.moveData.setData(e,t),this.rotation=e},t.prototype.shoot=function(){var e=this;e.activate=!0,e._sp.visible=!0,e.curDis=0,e._blastBmp&&(e._blastBmp.visible=!1),e._blastPartical&&(e._blastPartical.visible=!1)},t.prototype.onFly=function(e){void 0===e&&(e=null);var t=this,n=t.moveData.getDAxis(),r=n.dx,i=n.dy;t.x+=r,t.y+=i,t.curDis+=t.moveData.speed,t.curDis>=t.distance&&t.disposeImmediately()},t.prototype.dispose=function(e){var t=this;void 0===e&&(e=!0),e&&this.blast(),setTimeout(function(){t.activate=!1,t.parent&&t.parent.removeChild(t)},200)},t.prototype.disposeImmediately=function(){this.activate=!1,this.parent&&this.parent.removeChild(this)},t.prototype.draw=function(){var e=this.size,t=1.5*e,n=new egret.Sprite;n.graphics.beginFill(this.color),n.graphics.moveTo(e/2,0),n.graphics.lineTo(e,t),n.graphics.lineTo(0,t),n.graphics.endFill(),n.x=-e/2,n.y=-e/2,this.addChild(n),this._sp=n,this._sp.visible=!0},t.prototype.drawBlast=function(){var e=new egret.Bitmap;e.texture=RES.getRes("sheet_json#bulletblast"),e.width=4*this.size,e.height=4*this.size,e.x=2*-this.size,e.y=2*-this.size,this.addChild(e),this._blastBmp=e,this._blastBmp.visible=!1},t.prototype.loadPartical=function(){this._blastPartical=new particle.GravityParticleSystem(RES.getRes("blast_png"),RES.getRes("blast_json")),this.addChild(this._blastPartical)},t.prototype.blast=function(){this._sp.visible=!1,this._blastBmp&&(this._blastBmp.visible=!0),this._blastPartical&&(this._blastPartical.visible=!0,this._blastPartical.start())},t.prototype.refreshPosition=function(){e.prototype.refreshPosition.call(this),this._collisionPoints=[new egret.Point(this.x,this.y)]},Object.defineProperty(t.prototype,"collisionPoints",{get:function(){var e=this;return e._collisionPoints.map(function(t,n){return e.parent?e.parent.localToGlobal(t.x,t.y):t})},enumerable:!1,configurable:!0}),t.prototype.collisionCheck=function(e){for(var t=0,n=this.collisionPoints;t<n.length;t++){var r=n[t];if(e.hitTestPoint(r.x,r.y))return!0}return!1},Object.defineProperty(t.prototype,"planeDamage",{get:function(){return this._planeDamage},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"barrierDamage",{get:function(){return this._barrierDamage},enumerable:!1,configurable:!0}),t.range=2e3,t.pool=new Pool(function(){var e=new t;return t.allArr.push(e),e}),t.allArr=[],t}(CollisionObject);window.Bullet=n,__reflect(n.prototype,"Bullet",["IPoolObject"])},function(e,t){var n=function(e){function t(){var n=e.call(this,30,16766720,0,32,t.range)||this;return n._barrierDamage=20,n}return __extends(t,e),t.prototype.draw=function(){var e=new egret.Bitmap;e.texture=RES.getRes("sheet_json#bullet"),e.width=1.5*this.size,e.height=2.5*this.size,e.x=-this.size,e.y=-this.size,this.addChild(e),this._sp=e},t.prototype.refreshPosition=function(){this.position=new egret.Point(this.x,this.y),this._collisionPoints=[new egret.Point(this.x,this.y-this.width),new egret.Point(this.x-this.width,this.y),new egret.Point(this.x+this.width,this.y)]},Object.defineProperty(t.prototype,"collisionPoints",{get:function(){var e=this;return e._collisionPoints.map(function(t,n){return e.parent?e.parent.localToGlobal(t.x,t.y):t})},enumerable:!1,configurable:!0}),t.range=3e3,t.pool=new Pool(function(){var e=new t;return Bullet.allArr.push(e),e}),t}(Bullet);window.BulletLV2=n,__reflect(n.prototype,"BulletLV2",[]);var r=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.pool=new Pool(function(){var e=new t;return EnemyBullet.allArr.push(e),e}),t}(n);window.EnemyBulletLV2=r,__reflect(r.prototype,"EnemyBulletLV2",[])},function(e,t){var n=function(e){function t(){var t=e.call(this)||this;return t._arr=[],t}return __extends(t,e),t.prototype.setDashTime=function(e){if(e>this._arr.length)for(var t=this._arr.length;e>t;t++){var n=this.drawIcon();n.x=-n.width*(t+1),this.addChild(n),this._arr.push(n)}for(var t=0;t<this._arr.length;t++)this._arr[t].visible=e>t},t.prototype.drawIcon=function(){var e=new egret.Bitmap,t=RES.getRes("sheet_json#jet");return e.texture=t,e.width*=.5,e.height*=.5,e},t}(egret.Sprite);window.DashGauge=n,__reflect(n.prototype,"DashGauge",[])},function(e,t){var n=function(e){function t(t){void 0===t&&(t=30);var n=e.call(this)||this;return n.buff=null,n.maxHP=3,n.HP=3,n._time=t,n.draw(),n}return __extends(t,e),t.prototype.timePassed=function(){return this._time--,0!=this._time},t.prototype.draw=function(){var e=new egret.Bitmap;e.texture=RES.getRes("sheet_json#drift"),e.width=80,e.height=80,e.x=0,e.y=0,this.addChild(e)},t.prototype.change2Buff=function(e){if(void 0===e&&(e=null),!e){var t=[BuffType.BULLET_BOOST_BIG,BuffType.BULLECT_BOOST_PLUS2DIRECT,BuffType.BARRIER,BuffType.HIGH_SPEED,BuffType.HP_RECOVER,BuffType.CLEAN_ENEMY,BuffType.CONFUSE_ENEMY];e=t[Math.floor(Math.random()*t.length)]}var n=BuffManager.getBuffData(e);this.buff=n,this.drawBuff()},t.prototype.drawBuff=function(){if(this.buff){var e=new egret.Bitmap;e.texture=RES.getRes("sheet_json#buff"),e.width=100,e.height=100,e.x=0,e.y=0;var t=new egret.TextField;t.bold=!0,t.size=80,t.textColor=0,t.width=100,t.height=100,t.verticalAlign=egret.VerticalAlign.MIDDLE,t.textAlign=egret.HorizontalAlign.CENTER,t.text=this.buff.label,this.removeChildren(),this.addChild(e),this.addChild(t)}},t.prototype.dispose=function(){this.parent&&this.parent.removeChild(this)},t.prototype.refreshPosition=function(){this.position=new egret.Point(this.x,this.y),this._collisionPoints=[new egret.Point(this.x,this.y),new egret.Point(this.x+this.width,this.y),new egret.Point(this.x+this.width,this.y+this.height),new egret.Point(this.x,this.y+this.height)]},Object.defineProperty(t.prototype,"collisionPoints",{get:function(){var e=this;return e._collisionPoints.map(function(t,n){return e.parent?e.parent.localToGlobal(t.x,t.y):t})},enumerable:!1,configurable:!0}),t.prototype.collisionCheck=function(e){for(var t=0,n=this.collisionPoints;t<n.length;t++){var r=n[t];if(e.hitTestPoint(r.x,r.y))return!0}return!1},t}(BaseCharacter);window.Drift=n,__reflect(n.prototype,"Drift",[])},function(e,t){var n=function(e){function t(){var t=e.call(this)||this;return t.score=1,t.maxHP=3,t.HP=3,t.draw(),t}return __extends(t,e),t.prototype.draw=function(){var e=80,t=new egret.Bitmap;t.texture=RES.getRes("sheet_json#tgt"),t.width=e,t.height=e,t.x=-e/2,t.y=-e/2,this.addChild(t)},t.prototype.refreshPosition=function(){this.position=new egret.Point(this.x,this.y)},t.prototype.dispose=function(){this.parent&&this.parent.removeChild(this)},t.prototype.crash=function(){this.dispose()},t}(BaseCharacter);window.DummyTgt=n,__reflect(n.prototype,"DummyTgt",[])},function(e,t){var n=function(e){function t(t,n,r,i){void 0===t&&(t=3),void 0===n&&(n=5),void 0===r&&(r=180),void 0===i&&(i=1);var o=e.call(this)||this;return o._type=1,o.lockAI=!1,o.maxHP=5,o.HP=5,o.pWidth=t,o.pHeight=n,o._type=i,o.draw(),o.pColor=16711680,o.gears=WorldData.SPEED.EnemyPlane,o.shotSpeed=750,o.shotTimer.delay=o.shotSpeed,o.bulletGenerator=EnemyBullet.pool,o.bulletRange=EnemyBullet.range,o._rotationDirection=0,o._score=100,o.rotation=r,o}return __extends(t,e),t.prototype.boot=function(){this.moveData.setData(this.rotation,this.speed),this.aiCfg=new AIConfig(this)},t.prototype.aiDelay=function(e){this.aiCfg.delay(e)},t.prototype.shot=function(){this.shotTimer.running||(this.shotTimer.repeatCount=0,this.shotTimer.addEventListener(egret.TimerEvent.TIMER,this.onShot,this),this.shotTimer.start())},t.prototype.stop=function(){this.shotTimer.running&&(this.shotTimer.removeEventListener(egret.TimerEvent.TIMER,this.onShot,this),this.shotTimer.stop())},t.prototype.onShot=function(){var e=this;if(e.parent)for(var t=e.parent,n=0;n<e.bulletDirections.length;n++){var r=e.bulletGenerator.getOne();r.x=e.x,r.y=e.y;var i=e.bulletDirections[n];r.setDirection(e.rotation+i),t.addGameObj(r),r.shoot()}},t.prototype.draw=function(){var e=this,t=new PlaneDisp(e._type);t.width=4*e.pWidth,t.height=4*e.pHeight,t.x=2*-e.pWidth,t.y=2*-e.pHeight,e.addChild(t),e._disp=t},t.prototype.refreshMove=function(){var e=this;e.rotation+=e._rotationDirection*e.rotStep,e.curGear=1,e.moveData.setData(e.rotation,e.speed);var t=e.moveData.getDAxis(),n=t.dx,r=t.dy;this.x+=n,this.y+=r,this._disp.setSpinState(e._rotationDirection),this.checkIfOverBorder()},t.prototype.refreshAI=function(e,t){var n=this;if(!n.lockAI){var r=n.aiCfg.refreshAI(e,t);if(r){switch(r.shot==AI_Shot.FIRE?n.shot():n.stop(),r.speed){case AI_Speed.NORMAL:n.curGear=1;break;case AI_Speed.FAST:n.curGear=2;break;case AI_Speed.SLOW:n.curGear=0}switch(r.rotation){case AI_Rotation.MINUS:n._rotationDirection=-1;break;case AI_Rotation.STRAIGHT:n._rotationDirection=0;break;case AI_Rotation.PLUS:n._rotationDirection=1}}}},t.prototype.confuseAI=function(e){var t=this;e&&(t.stop(),t.curGear=0,t._rotationDirection=1),t.lockAI=e},t.prototype.crash=function(){this.stop(),e.prototype.crash.call(this)},Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!1,configurable:!0}),t}(BasePlane);window.EnemyPlane=n,__reflect(n.prototype,"EnemyPlane",[])},function(e,t){var n=function(e){function t(t,n,r){void 0===t&&(t=30),void 0===n&&(n=50),void 0===r&&(r=180);var i=e.call(this,t,n,r,2)||this;return i._type=2,i.maxHP=8,i.HP=8,i.gears=WorldData.SPEED.EliteEnemyPlane,i.shotSpeed=550,i.shotTimer.delay=i.shotSpeed,i._score=300,i}return __extends(t,e),t}(EnemyPlane);window.EliteEnemyPlane=n,__reflect(n.prototype,"EliteEnemyPlane",[])},function(e,t){var n=function(e){function t(){return e.call(this,20,13047173,0,20,t.range)||this}return __extends(t,e),t.range=2e3,t.pool=new Pool(function(){var e=new t;return t.allArr.push(e),e}),t.allArr=[],t}(Bullet);window.EnemyBullet=n,__reflect(n.prototype,"EnemyBullet",[])},function(e,t){var n=function(e){function t(t,n,r){void 0===t&&(t=30),void 0===n&&(n=50),void 0===r&&(r=180);var i=e.call(this,t,n,r,3)||this;return i._type=3,i.maxHP=10,i.HP=10,i.gears=WorldData.SPEED.ExtremeEnemyPlane,i.shotSpeed=350,i.shotTimer.delay=i.shotSpeed,i._score=1e3,i}return __extends(t,e),t.prototype.boot=function(){e.prototype.boot.call(this),this.aiCfg.driftFirst=WorldData.ENEMY_DRIFT},t.prototype.setBuff=function(t,n){e.prototype.setBuff.call(this,t,n),this.buffManager.buffNum>=1&&(this.aiCfg.driftFirst=!1)},t.prototype.loseBuff=function(t){e.prototype.loseBuff.call(this,t),this.buffManager.buffNum<=0&&(this.aiCfg.driftFirst=!0)},t}(EnemyPlane);window.ExtremeEnemyPlane=n,__reflect(n.prototype,"ExtremeEnemyPlane",[])},function(e,t){var n=function(e){function t(t,n,i,o){void 0===n&&(n=30),void 0===i&&(i=50),void 0===o&&(o=180);var a=this,s=r.instance;return a=e.call(this,n,i,o,s.curTextureType)||this,a.maxHP=s.curHP,a.HP=s.curHP,a.gears=s.curMoveSpd,a.shotSpeed=s.curShotSpd,a.shotTimer.delay=a.shotSpeed,a._score=s.curScore,a._drift=s.curDriftFirst,a}return __extends(t,e),t.prototype.boot=function(){e.prototype.boot.call(this)},t.prototype.setBuff=function(t,n){e.prototype.setBuff.call(this,t,n)},t.prototype.loseBuff=function(t){e.prototype.loseBuff.call(this,t)},t}(EnemyPlane);window.LevelEnemyPlane=n,__reflect(n.prototype,"LevelEnemyPlane",[]);var r=function(){function e(){this.lvData={base:1,max:20,step:1,span:1},this.hpData={base:3,max:13,step:1,span:2},this.shotSpdData={base:750,max:250,step:25,span:1},this.moveSpdData={base:[2,6,12],max:[10,18,28],step:[1,1,1],span:[2,1,1]},this.typeData={base:1,max:3,step:1,span:5},this.scoreData={base:100,max:5e3,step:245,span:1},this.init()}return e.prototype.init=function(){var e=this;e._curLv=0,e._curHP=e.hpData.base,e._curShotSpd=e.shotSpdData.base,e._curMoveSpd=e.moveSpdData.base,e._curTextureType=e.typeData.base,e._curScore=e.scoreData.base,e._curDriftFirst=!1,e._hpSpan=0,e._shotSpdSpan=0,e._moveSpdSPan=[0,0,0]},e.prototype.levelUp=function(){var e=this;e._curLv!=e.lvData.max&&(e._curLv++,1!=e._curLv&&(e.hpHandle(),e.shotSpdHandle(),e.moveSpdHandle(),e._curLv>10&&(e._curDriftFirst=!0),5==e._curLv?e._curTextureType=2:10==e._curLv&&(e._curTextureType=3),e._curLv<5?e._curScore+=100:e._curLv<10?e._curScore+=500:e._curScore+=1e3,console.log("levelUp : ",e._curMoveSpd,e._curShotSpd)))},e.prototype.hpHandle=function(){var e=this,t=e.hpData;e._hpSpan++,e._hpSpan==t.span&&e._curHP<t.max&&(e._hpSpan=0,e._curHP+=t.step)},e.prototype.shotSpdHandle=function(){var e=this,t=e.shotSpdData;e._shotSpdSpan++,e._shotSpdSpan==t.span&&e._curShotSpd>t.max&&(e._shotSpdSpan=0,e._curShotSpd-=t.step)},e.prototype.moveSpdHandle=function(){for(var e=this,t=e.moveSpdData,n=0;3>n;n++)e._moveSpdSPan[n]++,e._moveSpdSPan[n]==t.span[n]&&e._curMoveSpd[n]<t.max[n]&&(e._moveSpdSPan[n]=0,e._curMoveSpd[n]+=t.step[n])},Object.defineProperty(e.prototype,"curLv",{get:function(){return this._curLv},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curHP",{get:function(){return this._curHP},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curShotSpd",{get:function(){return this._curShotSpd},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curMoveSpd",{get:function(){return this._curMoveSpd},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curTextureType",{get:function(){return this._curTextureType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curDriftFirst",{get:function(){return this._curDriftFirst},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curScore",{get:function(){return this._curScore},enumerable:!1,configurable:!0}),Object.defineProperty(e,"instance",{get:function(){return e._ins||(e._ins=new e),e._ins},enumerable:!1,configurable:!0}),e}();window.LevelData=r,__reflect(r.prototype,"LevelData",[])},function(e,t){var n=function(e){function t(t,n){void 0===t&&(t=3),void 0===n&&(n=5);var r=e.call(this)||this;return r.maxHP=10,r.HP=r.maxHP,r.pWidth=t,r.pHeight=n,r.pColor=65280,r.gears=WorldData.SPEED.PlayerPlane,r.draw(),r.barrier.energy=100,r.bulletDirections=[0],r.bulletGenerator=Bullet.pool,r.bulletRange=Bullet.range,r}return __extends(t,e),t.prototype.draw=function(){var e=this,t=new PlaneDisp(0);t.width=4*e.pWidth,t.height=4*e.pHeight,t.x=2*-e.pWidth,t.y=2*-e.pHeight,e.addChild(t),e._disp=t},t.prototype.move=function(t,n){e.prototype.move.call(this,t,n),this._disp.setSpinState(n)},t.prototype.crash=function(){e.prototype.crash.call(this),this.dispatchEvent(new egret.Event(PlayEvents.GAME_OVER))},t.prototype.shot=function(){this.shotTimer.running||(e.prototype.shot.call(this),this.dispatchEvent(new egret.Event(PlayEvents.PLAYER_SHOT)))},t}(BasePlane);window.PlayerPlane=n,__reflect(n.prototype,"PlayerPlane",[])},function(e,t){var n=function(e){function t(t,n,r,i){void 0===r&&(r=20),void 0===i&&(i=30);var o=e.call(this)||this;return o.followDelay=200,o.pWidth=r,o.pHeight=i,o.pColor=2263842,o.draw(),o._mainPlane=t,o._place=n,"LEFT"==n?o._offsetX=-t.width/2-o.width-50:o._offsetX=t.width/2+o.width+50,o._offsetY=t.height/2-o.height/2,o.x=t.x+o._offsetX,o.y=t.y+o._offsetY,t.parent.addChild(o),t.addEventListener(PlayEvents.PLAYER_SHOT,o.shot,o),o.bulletGenerator=t.bulletGenerator,o.move(),o}return __extends(t,e),t.prototype.draw=function(){var e=new egret.Bitmap;e.texture=RES.getRes("sheet_json#plane2"),e.width=4*this.pWidth,e.height=4*this.pHeight,e.x=2*-this.pWidth,e.y=2*-this.pHeight,this.addChild(e)},t.prototype.dispose=function(){this._moveTween&&(this._moveTween.pause(),this._moveTween=null),this._mainPlane.removeEventListener(PlayEvents.PLAYER_SHOT,this.shot,this),this.removeChildren(),this.parent&&this.parent.removeChild(this)},t.prototype.move=function(){var e=this,t=e._mainPlane.x+e._offsetX,n=e._mainPlane.y+e._offsetY;if(e.rotation=e._mainPlane.rotation,t==e.x&&n==e.y)e._moveTween=egret.Tween.get(e).wait(200).call(e.move,e,[0,0]);else{var r={x:t,y:n};e._moveTween=egret.Tween.get(e).to(r,200).call(e.move,e,[0,0])}},t.prototype.shot=function(){var e=this,t=e.bulletGenerator.getOne();t.x=e.x,t.y=e.y,t.setDirection(e.rotation),e.parent.addChild(t),t.shoot()},t}(BasePlane);window.SubPlane=n,__reflect(n.prototype,"SubPlane",[])},function(e,t){var n=function(e){function t(t){var n=e.call(this)||this;return n._curAnalogX=0,n._curAnalogY=0,n._stageAnalogX=0,n._stageAnalogY=0,n.skinName="resource/eui_skins/ControlPanel.exml",n.addEventListener(eui.UIEvent.CREATION_COMPLETE,n.initData,n),n._stage=t,n}return __extends(t,e),t.prototype.initData=function(e){var t=this;t.width=t._stage.stageWidth,t.btn_shot.x=t.width-t.btn_shot.width,t.btn_barrier.x=t.btn_shot.x,t.btn_shot.addEventListener(egret.TouchEvent.TOUCH_BEGIN,t.onPressShot,t),t.btn_shot.addEventListener(egret.TouchEvent.TOUCH_END,t.onReleaseShot,t),t.btn_shot.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,t.onReleaseShot,t),t.analog.addEventListener(egret.TouchEvent.TOUCH_BEGIN,t.onPressAnalog,t),t.analog.addEventListener(egret.TouchEvent.TOUCH_MOVE,t.onPressAnalog,t),t.analog.addEventListener(egret.TouchEvent.TOUCH_END,t.onReleaseAnalog,t),t.analog.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,t.onReleaseAnalog,t),t._stageAnalogX=t.analog.x+t.x,t._stageAnalogY=t.analog.y+t.y,t.barrier_gauge.x=t.btn_barrier.x,t.barrier_gauge.width=t.btn_barrier.width,t.hp_gauge.x=t.btn_barrier.x,t.hp_gauge.width=t.btn_barrier.width,t.btn_barrier.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onPressBarrier,t)},t.prototype.onPressShot=function(e){this.onKeyDown&&this.onKeyDown({keyCode:Keyboard.Z})},t.prototype.onReleaseShot=function(e){this.onKeyUp&&this.onKeyUp({keyCode:Keyboard.Z})},t.prototype.onPressBarrier=function(e){this.onKeyDown&&this.onKeyDown({keyCode:Keyboard.X})},t.prototype.onPressAnalog=function(e){var t=0,n=0;switch(e.target.name){case"leftup":t=-1,n=1;break;case"up":t=0,n=1;break;case"rightup":t=1,n=1;break;case"left":t=-1,n=0;break;case"right":t=1,n=0;break;case"leftdown":t=-1,n=-1;break;case"down":t=0,n=-1;break;case"rightdown":t=1,n=-1;break;default:return}(t!=this._curAnalogX||n!=this._curAnalogY)&&(this._curAnalogX=t,this._curAnalogY=n,this.onDirectChange(t,n))},t.prototype.onReleaseAnalog=function(e){this._curAnalogX=0,this._curAnalogY=0,this.onDirectChange&&this.onDirectChange(this._curAnalogX,this._curAnalogY)},t}(eui.Component);window.ControlPanel=n,__reflect(n.prototype,"ControlPanel",[])},function(e,t){var n=function(){function e(){var e=this;this._spinDirect=0,this._lineSpd=0,this._lock=!0,this._shotTriggered=!1,document.addEventListener("keydown",function(t){e.onKeyDown(t)}),document.addEventListener("keyup",function(t){e.onKeyUp(t)})}return e.getInstance=function(){return e.ins||(e.ins=new e),e.ins},e.prototype.setPanel=function(e){var t=this;e.onDirectChange=function(e,n){t.setDirect(e,n)},e.onKeyDown=function(e){t.onKeyDown(e)},e.onKeyUp=function(e){t.onKeyUp(e)},this._panel=e},e.prototype.setDirect=function(e,t){this._spinDirect=e,this._lineSpd=t},e.prototype.setControllee=function(e){this._controllee=e},e.prototype.setLock=function(e){this._lock=e},e.prototype.btnTrigger=function(e){void 0===e&&(e=null);var t=this;t._controllee.move(t._lineSpd,t._spinDirect),t._shotTriggered&&t._controllee.shot()},e.prototype.onKeyDown=function(e){if(!this._lock)switch(e.keyCode){case Keyboard.Z:this._shotTriggered||this._controllee.shot(),this._shotTriggered=!0;break;case Keyboard.X:this._controllee.bootBarrier(!this._controllee.isBarrier);break;case Keyboard.C:break;case Keyboard.LEFT:this._spinDirect=-1;break;case Keyboard.UP:this._lineSpd=1;break;case Keyboard.RIGHT:this._spinDirect=1;break;case Keyboard.DOWN:this._lineSpd=-1}},e.prototype.onKeyUp=function(e){switch(e.keyCode){case Keyboard.Z:this._shotTriggered=!1;break;case Keyboard.X:break;case Keyboard.C:break;case Keyboard.LEFT:this._spinDirect=0;break;case Keyboard.UP:this._lineSpd=0;break;case Keyboard.RIGHT:this._spinDirect=0;break;case Keyboard.DOWN:this._lineSpd=0}},e}();window.Controller=n,__reflect(n.prototype,"Controller",["IController"])},function(e,t){},function(e,t){var n=function(e){function t(t){var n=e.call(this)||this;n._stage=egret.MainContext.instance.stage,n._collisionCheckInterval=0,n._zoomed=!1,n.width=n._stage.stageWidth,n.height=n._stage.stageHeight,n._zoomed&&(n.scaleX=.15,n.scaleY=.15,n.x+=300,n.y+=300),n._bgLayer=new BgLayer(WorldData.MAP_SIZE,n.width,n.height),n._bgLayer.addEventListener(PlayEvents.OVER_BORDER,n.onOverBorder,n);var r=n.width/2,i=n.height/2,o=new egret.Sprite;return o.width=n.width,o.height=n.height,o.anchorOffsetX=r,o.anchorOffsetY=i,o.x=r,o.y=i,o.addChild(n._bgLayer),n._playArea=o,n.addChild(o),n.mapSizeData={halfMapSize:WorldData.MAP_SIZE/2,halfStageWidth:r,halfStageHeight:i},LifecycleCallback.addFunc("stage",function(){n.pause()},function(){n.resume()}),n}return __extends(t,e),t.prototype.startPlay=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){throw new Error("Function not implemented!")})})},t.prototype.initUI=function(){var e=this;if(egret.Capabilities.os.indexOf("Windows")<0){var t=new ControlPanel(e._stage);t.y=e._stage.stageHeight-t.height,e.addChild(t),e._controlPanel=t,e._playerController.setPanel(t),e._barrierGauge=t.barrier_gauge,e._hpGauge=t.hp_gauge}else{var n=new BarrierGauge;n.width=.4*e.width,n.height=50,n.x=.3*e.width,n.y=e.height-100,e.addChild(n),e._barrierGauge=n;var r=new HPGauge;r.width=.4*e.width,r.height=50,r.x=.3*e.width,r.y=e.height-170,e.addChild(r),e._hpGauge=r}e._barrierGauge.plane=e._player,e._barrierGauge.refresh(),e._hpGauge.plane=e._player,e._hpGauge.refresh(),e.initTimeLimit()},t.prototype.initTimeLimit=function(){var e=this,t=e._timelimit?e._timelimit:new TimeLimit;t.second=60*WorldData.GAME_TIME_MINUTES,t.width=e.width,t.y=20,t.once(PlayEvents.GAME_OVER,e.GameOver,e),e.addChild(t),e._timelimit=t},t.prototype.initRadar=function(){var e=new Radar(200,30);this.addChild(e),this._radar=e},t.prototype.initPlayer=function(){var e=this,t=this.mapSizeData.halfMapSize,n=new PlayerPlane(WorldData.PLANE_WIDTH,WorldData.PLANE_HEIGHT),r=Controller.getInstance();return r.setControllee(n),this._player=n,this._playerController=r,n.x=t,n.y=t+this.mapSizeData.halfStageHeight,n.boot(),this._bgLayer.addGameObj(n),n.addEventListener(PlayEvents.PLAYER_SHOT,function(t){e._playerBullet++},this),n.addEventListener(PlayEvents.OVER_BORDER,this.onOverBorder,this),n.addEventListener(PlayEvents.BUFF_GAIN,this.onPlayerGetBuff,this),n.addEventListener(PlayEvents.BUFF_LOSE,this.onPlayerLoseBuff,this),new Promise(function(i,o){egret.Tween.get(n).to({y:t},1e3).call(function(){n.refreshPosition(),r.setLock(!1),e._radar.regPlayer(n)}).call(i,e)})},t.prototype.refreshStage=function(e){throw new Error("Function not implemented!")},t.prototype.refreshAllPosition=function(){throw new Error("Function not implemented!")},t.prototype.refreshCamera=function(){var e=this,t=e._player,n=e._bgLayer,r=t.x-e.mapSizeData.halfMapSize,i=t.y-e.mapSizeData.halfMapSize,o=t.rotation;n.setPosition(e.mapSizeData.halfStageWidth-r,e.mapSizeData.halfStageHeight-i),e._playArea.rotation=-o},t.prototype.onOverBorder=function(e){var t=this,n=e.currentTarget,r=t._bgLayer,i=n.x,o=n.y;switch(e.data.d){case"top":o=WorldData.MAP_SIZE-n.y-n.height;break;case"bottom":o=WorldData.MAP_SIZE-n.y+n.height;break;case"left":i=WorldData.MAP_SIZE-n.x-n.width;break;case"right":i=WorldData.MAP_SIZE-n.x+n.width}if(n.x=i,n.y=o,n==t._player){var a=t._player,s=a.x-t.mapSizeData.halfMapSize,l=a.y-t.mapSizeData.halfMapSize;a.rotation;r.setPosition(t.mapSizeData.halfStageWidth-s,t.mapSizeData.halfStageHeight-l)}},t.prototype.onPlayerGetBuff=function(e){throw new Error("Function not implemented!")},t.prototype.onPlayerLoseBuff=function(e){throw new Error("Function not implemented!")},t.prototype.addChild=function(t){return t instanceof Bullet?this._bgLayer.addChild(t):e.prototype.addChild.call(this,t)},t.prototype.GameOver=function(e){throw void 0===e&&(e=null),new Error("Function not implemented!")},t.prototype.cleanStage=function(){throw new Error("Function not implemented!")},t.prototype.pause=function(){throw new Error("Function not implemented!")},t.prototype.resume=function(){throw new Error("Function not implemented!")},t.prototype.dispose=function(){this.cleanStage(),LifecycleCallback.removeFunc("stage")},t}(egret.Sprite);window.BasePlayScene=n,__reflect(n.prototype,"BasePlayScene",[])},function(e,t){var n=function(e){function t(t,n,r){var i=e.call(this)||this;i._stage=egret.MainContext.instance.stage;var o=RES.getRes("bgcell2_png"),a=new egret.Bitmap(o);a.fillMode=egret.BitmapFillMode.REPEAT,a.width=t,a.height=t;var s=new egret.Sprite;s.width=t,s.height=t,i._layer=s,s.addChild(a),i.anchorOffsetX=t/2,i.anchorOffsetY=t/2,i.x=n/2,i.y=r/2,i._oriPos=new egret.Point(i.x,i.y),e.prototype.addChild.call(i,s);var l=RES.getRes("clouds_png"),u=new egret.Bitmap(l);return u.fillMode=egret.BitmapFillMode.REPEAT,u.width=t,u.height=t,u.alpha=.7,e.prototype.addChild.call(i,u),i._clouds=u,i}return __extends(t,e),t.prototype.createBmp=function(){},t.prototype.resetPosition=function(){this.x=this._oriPos.x,this.y=this._oriPos.y},t.prototype.setPosition=function(e,t){var n=this;n.x=e,n.y=t},Object.defineProperty(t.prototype,"layerRotation",{get:function(){return this._layer.rotation},set:function(e){this._layer.rotation=e},enumerable:!1,configurable:!0}),t.prototype.addGameObj=function(t){e.prototype.addChildAt.call(this,t,this.numChildren-1)},t.prototype.addChild=function(e){return this._layer.addChild(e)},t.prototype.dispose=function(){this.removeChildren(),this.parent&&this.parent.removeChild(this)},t}(egret.Sprite);window.BgLayer=n,__reflect(n.prototype,"BgLayer",[])},function(e,t){var n=function(e){function t(){var t=e.call(this)||this;return t.touchEnabled=!0,t.touchChildren=!0,t.skinName="resource/eui_skins/Description.exml",t.btn_next.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onNext,t),t._curPage=0,t}return __extends(t,e),t.prototype.dispose=function(){this.btn_next.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onNext,this)},t.prototype.onNext=function(e){return 4==this._curPage?void this.dispatchEvent(new egret.Event(PlayEvents.CLOSE_DESCRIPT)):void(this.currentState="p"+ ++this._curPage)},t}(eui.Component);window.DescriptionPage=n,__reflect(n.prototype,"DescriptionPage",[])},function(e,t){var n=function(e){function t(t){var n=e.call(this)||this;return n.x=0,n.y=0,n.width=t.stageWidth,n.height=t.stageHeight,n.graphics.beginFill(8900331),n.graphics.drawRect(0,0,n.width,n.height),n.graphics.endFill(),n.display(),n}return __extends(t,e),t.prototype.display=function(){var e=new PlayerPlane;e.x=e.width/2,e.y=e.height/2;var t=new EnemyPlane;t.x=t.width/2,t.y=t.height/2,this.addChild(t)},t}(egret.Sprite);window.DisplayScene=n,__reflect(n.prototype,"DisplayScene",[])},function(e,t){var n=function(e){function t(t,n,r,i,o,a){void 0===a&&(a=null);var s=e.call(this)||this;return s.skinName="resource/eui_skins/GameResult.exml",s.addEventListener(eui.UIEvent.CREATION_COMPLETE,s.initData,s),s._clear=t,s._time=n,s._bullet=r,s._hit=i,s._defeat=o,s._callBack=a,s}return __extends(t,e),t.prototype.initData=function(){var e=this;e.txt_hit.text=e._hit+"次",e.txt_bullet.text=e._bullet+"颗",e.txt_defeat.text=e._defeat+"分";var t=e._time,n=Math.floor(t/60);if(0==n)e.txt_time.text=t+"秒";else{var r=t%60;e.txt_time.text=n+"分 "+r+"秒"}e.btn_retry.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onClick,e)},t.prototype.dispose=function(){this.btn_retry.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.parent&&this.parent.removeChild(this)},t.prototype.onClick=function(e){this._callBack?this._callBack(e):this.dispatchEvent(new egret.Event(PlayEvents.CLEAR))},t}(eui.Component);window.GameResult=n,__reflect(n.prototype,"GameResult",[])},function(e,t){var n=function(e){function t(t){var n=e.call(this,t)||this;return n._buffRate=.8,n}return __extends(t,e),t.prototype.startPlay=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return e=this,e._playerBullet=0,e._playerHit=0,e._defeatEnemy=0,e._score=0,e._rank=0,e._gameovered=!1,e._maxEnemy=4,e._enemy=[],e._drifts=[],e.initRadar(),[4,e.initPlayer()];case 1:return t.sent(),e.startCreateEnemy(),e.createDrift(),e.initUI(),e.onRankUp(null),e.addEventListener(egret.Event.ENTER_FRAME,e.refreshStage,e),e.startEnemyTimer(),[2]}})})},t.prototype.initUI=function(){e.prototype.initUI.call(this),this._timelimit.addEventListener(PlayEvents.RANK_UP,this.onRankUp,this)},t.prototype.startEnemyTimer=function(){this._enemyTimer=new egret.Timer(1e4),this._enemyTimer.addEventListener(egret.TimerEvent.TIMER,this.onEnemyTimer,this),this._enemyTimer.start()},t.prototype.onEnemyTimer=function(){var e=this;e._enemy.length<e._maxEnemy&&e.createEnemy()},t.prototype.enemyFactory=function(e,t,n){var r,i=this._rank,o=Math.random();return.125>o?i-=2:.25>o&&(i-=1),r=1>=i?new EnemyPlane(e,t,n):2>=i?new EliteEnemyPlane(e,t,n):new ExtremeEnemyPlane(e,t,n)},t.prototype.startCreateEnemy=function(){for(var e=this,t=WorldData.PLANE_WIDTH,n=WorldData.PLANE_HEIGHT,r=1e3,i=0;4>i;i++){var o=0,a=0,s=0;switch(i){case 0:o=e._player.x+Math.random()*e.width-e.width/2,a=e._player.y-e.height/2-n-r,s=180;break;case 1:o=e._player.x+Math.random()*e.width-e.width/2,a=e._player.y+e.height/2+n+r,s=0;break;case 2:o=e._player.x-e.width/2-n-r,a=e._player.y+Math.random()*e.height-e.height/2,s=90;break;case 3:o=e._player.x+e.width/2+n+r,a=e._player.y+Math.random()*e.height-e.height/2,s=270}var l=new EnemyPlane(t,n,s);l.x=o,l.y=a,l.boot(),l.aiDelay(2*i),l.addEventListener(PlayEvents.OVER_BORDER,this.onOverBorder,this),l.refreshPosition(),e._bgLayer.addGameObj(l),e._enemy.push(l),e._radar.regObject(l)}},t.prototype.createEnemy=function(){var e,t=this,n=WorldData.MAP_SIZE,r=Math.floor(4*Math.random()),i=0,o=0,a=0,s=WorldData.PLANE_WIDTH,l=WorldData.PLANE_HEIGHT,u={};switch(r){case 0:i=Math.random()*n*.8+.1*n,o=-l,a=180,u={y:100};break;case 1:i=Math.random()*n*.8+.1*n,o=n+l,a=0,u={y:n-100-l};break;case 2:i=-l,o=Math.random()*n*.8+.1*n,a=90,u={x:100};break;case 3:i=n+l,o=Math.random()*n*.8+.1*n,a=270,u={x:n-100-l}}return u={},e=this.enemyFactory(s,l,a),e.x=i,e.y=o,e.addEventListener(PlayEvents.OVER_BORDER,this.onOverBorder,this),this._bgLayer.addGameObj(e),e.boot(),new Promise(function(n,r){egret.Tween.get(e).to(u,1e3).call(function(){e.refreshPosition(),t._enemy.push(e),t._radar.regObject(e)},t).call(n,t)})},t.prototype.createDrift=function(){this._driftTimer=new egret.Timer(5e3),this._driftTimer.addEventListener(egret.TimerEvent.TIMER,this.onDriftTimer,this),this._driftTimer.start()},t.prototype.onDriftTimer=function(e){var t=this;if(!(Math.random()>t._buffRate||t._drifts.length>=3)){var n=new Drift,r=.2*WorldData.MAP_SIZE,i=3*r;
n.x=Math.random()*i+r,n.y=Math.random()*i+r,n.refreshPosition(),t._radar.regObject(n),t._bgLayer.addChild(n),t._drifts.push(n)}},t.prototype.refreshStage=function(e){var t=this;if(!t._gameovered){if(t._playerController.btnTrigger(),t.refreshAllPosition(),t.refreshCamera(),t._radar.refresh(),t._barrierGauge.refresh(),t._timelimit.refresh(),2!=t._collisionCheckInterval)return void t._collisionCheckInterval++;if(t._collisionCheckInterval=0,WorldData.PLANE_CRASH)for(var n=0,r=t._enemy;n<r.length;n++){var i=r[n];if(t._player.collisionCheck(i))return t._player.crash(),void t.GameOver()}for(var o=0,a=Bullet.allArr;o<a.length;o++){var s=a[o];if(s.activate){for(var l=!1,u=0;u<t._enemy.length;u++){var c=t._enemy[u];if(s.collisionCheck(c)){console.log("enemy hit.");var f=c.hit(s);SoundManager.instance().playBgs("hit_mp3"),s.dispose(f),l=!0,c.isDefeated()&&(SoundManager.instance().playBgs("explode_mp3"),c.crash(),c.removeEventListener(PlayEvents.OVER_BORDER,t.onOverBorder,t),t._score+=c.score,t._radar.removeObject(c),t._enemy.splice(u,1),t._defeatEnemy++);break}}for(var u=0;u<t._drifts.length;u++){var h=t._drifts[u];s.collisionCheck(h)&&!l&&(s.dispose(),h.hit(s),SoundManager.instance().playBgs("hit_mp3"),h.isDefeated()&&h.change2Buff())}}}for(var p=0,d=EnemyBullet.allArr;p<d.length;p++){var s=d[p];if(s.activate){var l=!1;if(s.collisionCheck(t._player)){console.log("player hit");var _=t._player.hit(s);if(t._hpGauge.refresh(),SoundManager.instance().playBgs("hit_mp3"),l=!0,s.dispose(_),_&&t._playerHit++,t._player.isDefeated())return SoundManager.instance().playBgs("explode_mp3"),t._player.crash(),void t.GameOver();break}if(!l)for(var u=0;u<t._drifts.length;u++){var h=t._drifts[u];s.collisionCheck(h)&&!l&&(s.dispose(),h.hit(s),h.isDefeated()&&h.change2Buff())}}}for(var y=0;y<t._drifts.length;){var h=t._drifts[y];if(h.buff){var g=!1;if(h.collisionCheck(t._player)&&(t._player.setBuff(h.buff.type,h.buff.defaultDuration),g=!0,t._hpGauge.refresh(),SoundManager.instance().playBgs("item_mp3")),!g&&WorldData.ENEMY_DRIFT)for(var v=0,m=t._enemy;v<m.length;v++){var E=m[v];if(h.collisionCheck(E)){E.setBuff(h.buff.type,h.buff.defaultDuration),g=!0;break}}g?(h.dispose(),t._radar.removeObject(h),t._drifts.splice(y,1)):y++}else y++}}},t.prototype.refreshAllPosition=function(){var e=this;e._player&&e._player.refreshPosition();for(var t=0,n=e._enemy;t<n.length;t++){var r=n[t],i=r;i.refreshPosition(),i.refreshAI(e._player,e._drifts),i.refreshMove()}for(var o=0,a=Bullet.allArr;o<a.length;o++){var s=a[o];s.activate&&(s.onFly(),s.refreshPosition())}for(var l=0,u=EnemyBullet.allArr;l<u.length;l++){var s=u[l];s.activate&&(s.onFly(),s.refreshPosition())}},t.prototype.GameOver=function(e){var t=this;void 0===e&&(e=null),console.log("game over.");var n=this;n._gameovered=!0,n.cleanStage();var r=new GameResult(!1,n._timelimit.usedTime,n._playerBullet,n._playerHit,n._score,function(e){r.dispose(),t.dispatchEvent(new egret.Event(PlayEvents.BACK_2_TITLE))});r.x=(n._stage.stageWidth-r.width)/2,r.y=100,n.parent.addChild(r)},t.prototype.onRankUp=function(e){if(3!=this._rank){this._rank++;var t="";switch(this._rank){case 1:t="normal_mp3";break;case 2:t="elite_mp3";break;case 3:t="extreme_mp3"}t.length>0&&SoundManager.instance().play(t)}},t.prototype.cleanStage=function(){var e=this;try{e._bgLayer.dispose(),e._playArea.rotation=0,e.removeEventListener(egret.Event.ENTER_FRAME,e.refreshStage,e),e._player&&e._player.crash(),e._player=null;for(var t=0,n=e._enemy;t<n.length;t++){var r=n[t];r.crash()}e._enemy=[],e._driftTimer&&(e._driftTimer.stop(),e._driftTimer.removeEventListener(egret.TimerEvent.TIMER,e.onDriftTimer,e),e._driftTimer=null),e._enemyTimer&&(e._enemyTimer.stop(),e._enemyTimer.removeEventListener(egret.TimerEvent.TIMER,e.onEnemyTimer,e),e._enemyTimer=null),e._drifts&&(e._drifts.forEach(function(e,t){e.dispose()}),e._drifts=[]),e._timelimit.parent&&e._timelimit.parent.removeChild(e._timelimit),e._radar&&e._radar.dispose(),e._controlPanel&&(e.removeChild(e._controlPanel),e._controlPanel=null);for(var i=0,o=Bullet.allArr;i<o.length;i++){var a=o[i];a.disposeImmediately()}for(var s=0,l=EnemyBullet.allArr;s<l.length;s++){var a=l[s];a.disposeImmediately()}}catch(r){console.log(r)}},t.prototype.onPlayerGetBuff=function(e){switch(e.data.ty){case BuffType.CLEAN_ENEMY:this.cleanEnemy();break;case BuffType.CONFUSE_ENEMY:this.confuseEnemy()}},t.prototype.onPlayerLoseBuff=function(e){switch(e.data.ty){case BuffType.CONFUSE_ENEMY:this.unconfuseEnemy()}},t.prototype.cleanEnemy=function(){var e=this;SoundManager.instance().playBgs("explode_mp3");for(var t=0;t<e._enemy.length;t++){var n=e._enemy[t];n.crash(),n.removeEventListener(PlayEvents.OVER_BORDER,e.onOverBorder,e),e._score+=n.score,e._radar.removeObject(n),e._defeatEnemy++}e._enemy=[];var r=new egret.Sprite;r.graphics.beginFill(16711680),r.graphics.drawRect(0,0,e.width,e.height),r.graphics.endFill(),r.alpha=0,e.addChild(r),egret.Tween.get(r).to({alpha:.5},250).to({alpha:0},250).call(function(){r.parent&&r.parent.removeChild(r),r=null})},t.prototype.confuseEnemy=function(){for(var e=this,t=0;t<e._enemy.length;t++){var n=e._enemy[t];n.confuseAI(!0)}},t.prototype.unconfuseEnemy=function(){for(var e=this,t=0;t<e._enemy.length;t++){var n=e._enemy[t];n.confuseAI(!1)}},t.prototype.pause=function(){var e=this;e._gameovered||(e.removeEventListener(egret.Event.ENTER_FRAME,e.refreshStage,e),e._driftTimer&&e._driftTimer.stop(),e._enemyTimer&&e._enemyTimer.stop())},t.prototype.resume=function(){var e=this;e._gameovered||(e.addEventListener(egret.Event.ENTER_FRAME,e.refreshStage,e),e._driftTimer&&e._driftTimer.start(),e._enemyTimer&&e._enemyTimer.start())},t}(BasePlayScene);window.StageScene=n,__reflect(n.prototype,"StageScene",[])},function(e,t){var n=function(e){function t(t){var n=e.call(this,t)||this;return n.lvData=LevelData.instance,n.lvData.init(),n}return __extends(t,e),t.prototype.enemyFactory=function(e,t,n){var r=new LevelEnemyPlane(this.lvData.curLv,e,t,n);return r},t.prototype.initTimeLimit=function(){var e=this,t=e._timelimit?e._timelimit:new TimeLimit(1,-1);t.second=0,t.width=e.width,t.y=20,t.once(PlayEvents.GAME_OVER,e.GameOver,e),e.addChild(t),e._timelimit=t},t.prototype.onRankUp=function(e){this.lvData.levelUp();var t=this.lvData.curLv,n="";switch(t){case 1:n="normal_mp3";break;case 5:n="elite_mp3";break;case 10:n="extreme_mp3"}n.length>0&&SoundManager.instance().play(n)},t}(StageScene);window.InfiniteScene=n,__reflect(n.prototype,"InfiniteScene",[])},function(e,t){var n=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.initTimeLimit=function(){var e=this,t=e._timelimit?e._timelimit:new TimeLimit(1,-1);t.second=0,t.width=e.width,t.y=20,t.once(PlayEvents.GAME_OVER,e.GameOver,e),e.addChild(t),e._timelimit=t},t.prototype.startPlay=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return e=this,e._playerBullet=0,e._gameovered=!1,e._defeatEnemy=0,e._score=0,e.initRadar(),[4,e.initPlayer()];case 1:return t.sent(),e.initTgt(),e.initUI(),e.addEventListener(egret.Event.ENTER_FRAME,e.refreshStage,e),SoundManager.instance().play("normal_mp3"),[2]}})})},t.prototype.initTgt=function(){var e=this;e._enemy=[];for(var t=0;10>t;t++){var n=new DummyTgt;n.x=Math.random()*(WorldData.MAP_SIZE-200)+100,n.y=Math.random()*(WorldData.MAP_SIZE-200)+100,n.refreshPosition(),e._bgLayer.addGameObj(n),e._enemy.push(n),e._radar.regObject(n)}},t.prototype.refreshStage=function(e){var t=this;if(t._playerController.btnTrigger(),t.refreshAllPosition(),t.refreshCamera(),t._radar.refresh(),t._barrierGauge.refresh(),t._timelimit.refresh(),2!=t._collisionCheckInterval)return void t._collisionCheckInterval++;t._collisionCheckInterval=0;for(var n=0,r=Bullet.allArr;n<r.length;n++){var i=r[n];if(i.activate)for(var o=!1,a=0;a<t._enemy.length;a++){var s=t._enemy[a];if(i.collisionCheck(s)){console.log("enemy hit.");var l=s.hit(i);if(SoundManager.instance().playBgs("hit_mp3"),i.dispose(l),o=!0,s.isDefeated()&&(SoundManager.instance().playBgs("explode_mp3"),s.crash(),s.removeEventListener(PlayEvents.OVER_BORDER,t.onOverBorder,t),t._score+=s.score,t._radar.removeObject(s),t._enemy.splice(a,1),t._defeatEnemy++,0==t._enemy.length))return void t.GameOver();break}}}},t.prototype.refreshAllPosition=function(){var e=this;e._player&&e._player.refreshPosition();for(var t=0,n=Bullet.allArr;t<n.length;t++){var r=n[t];r.activate&&(r.onFly(),r.refreshPosition())}},t.prototype.GameOver=function(e){var t=this;void 0===e&&(e=null),console.log("game over.");var n=this;n._gameovered=!0,n.cleanStage();var r=new GameResult(!1,n._timelimit.usedTime,n._playerBullet,0,n._score,function(e){r.dispose(),t.dispatchEvent(new egret.Event(PlayEvents.BACK_2_TITLE))});r.x=(n._stage.stageWidth-r.width)/2,r.y=100,n.parent.addChild(r)},t.prototype.cleanStage=function(){var e=this;try{e._bgLayer.dispose(),e._playArea.rotation=0,e.removeEventListener(egret.Event.ENTER_FRAME,e.refreshStage,e),e._player&&e._player.crash(),e._player=null,e._radar&&e._radar.dispose(),e._timelimit.parent&&e._timelimit.parent.removeChild(e._timelimit),e._controlPanel&&(e.removeChild(e._controlPanel),e._controlPanel=null);for(var t=0,n=Bullet.allArr;t<n.length;t++){var r=n[t];r.disposeImmediately()}for(var i=0,o=EnemyBullet.allArr;i<o.length;i++){var r=o[i];r.disposeImmediately()}}catch(a){console.log(a)}},t.prototype.pause=function(){var e=this;e._gameovered||e.removeEventListener(egret.Event.ENTER_FRAME,e.refreshStage,e)},t.prototype.resume=function(){var e=this;e._gameovered||e.addEventListener(egret.Event.ENTER_FRAME,e.refreshStage,e)},t}(BasePlayScene);window.PracticeScene=n,__reflect(n.prototype,"PracticeScene",[])},function(e,t){var n=function(e){function t(t){var n=e.call(this)||this;n._stage=egret.MainContext.instance.stage,n.x=0,n.y=0,n.width=n._stage.stageWidth,n.height=n._stage.stageHeight;var r=new eui.Component;r.skinName="resource/eui_skins/Title.exml",r.width=n.width,r.y=50,n.addChild(r);var i=n.createBtn("开始游戏");i.x=(n.width-i.width)/2,i.y=n.height-350,n.addChild(i),i.addEventListener(egret.TouchEvent.TOUCH_TAP,n.modeSelect,n),n._startBtn=i;var o=n.createBtn("游戏说明");return o.x=(n.width-o.width)/2,o.y=n.height-150,o.addEventListener(egret.TouchEvent.TOUCH_TAP,n.openDescript,n),n.addChild(o),n._desBtn=o,SoundManager.instance().play("title_mp3"),n}return __extends(t,e),t.prototype.gameStart=function(e){this.dispatchEvent(e)},t.prototype.modeSelect=function(e){var t=this;t.removeChild(t._startBtn),t.removeChild(t._desBtn);var n=new ModeSelectPanel;n.x=(t.width-n.width)/2,n.y=t.height-n.height,t.addChild(n),t._msPanel=n,n.once(PlayEvents.START,t.gameStart,t)},t.prototype.openDescript=function(e){var t=this;t._descript=new DescriptionPage,t._descript.x=(t._stage.stageWidth-t._descript.width)/2,t._descript.y=t._stage.stageHeight-t._descript.height-100,t.addChild(t._descript),t._descript.once(PlayEvents.CLOSE_DESCRIPT,t.closeDescript,t),t._startBtn.visible=!1,t._desBtn.visible=!1},t.prototype.closeDescript=function(e){var t=this;t._descript&&(t._descript.parent.removeChild(t._descript),t._descript=null,t._startBtn.visible=!0,t._desBtn.visible=!0)},t.prototype.createBtn=function(e,t){void 0===t&&(t=50);var n=new eui.Button;return n.skinName="resource/eui_skins/ButtonSkin.exml",n.label=e,n.width=300,n.height=100,n.labelDisplay.size=t,n},t.prototype.dispose=function(){this.removeChildren(),this.parent.removeChild(this)},t}(egret.Sprite);window.TitleScene=n,__reflect(n.prototype,"TitleScene",[])},function(e,t){var n=function(e){function t(){return e.call(this)||this}return __extends(t,e),Object.defineProperty(t.prototype,"plane",{set:function(e){this._plane=e,this.refresh()},enumerable:!1,configurable:!0}),t.prototype.refresh=function(){this.value=this._plane?this._plane.barrier.energy:0},t}(eui.ProgressBar);window.BarrierGauge=n,__reflect(n.prototype,"BarrierGauge",[]);var r=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/eui_skins/HpBarSkin.exml",t}return __extends(t,e),Object.defineProperty(t.prototype,"plane",{set:function(e){this._plane=e,this.refresh()},enumerable:!1,configurable:!0}),t.prototype.refresh=function(){var e=this._plane;if(e){var t=e.HP/e.maxHP*100;this.value=t}},t}(eui.ProgressBar);window.HPGauge=r,__reflect(r.prototype,"HPGauge",[])},function(e,t){var n=function(e){function t(t){void 0===t&&(t=50);var n=e.call(this)||this;return n.skinName="resource/eui_skins/ModeSelectPanel.exml",n.once(eui.UIEvent.CREATION_COMPLETE,n.onComplete,n),n}return __extends(t,e),t.prototype.onComplete=function(e){var t=this;t.btnMode1.labelDisplay.size=50,t.btnMode2.labelDisplay.size=50,t.btnMode3.labelDisplay.size=50,t.btnMode1.once(egret.TouchEvent.TOUCH_TAP,t.onModeSelected,t),t.btnMode2.once(egret.TouchEvent.TOUCH_TAP,t.onModeSelected,t),t.btnMode3.once(egret.TouchEvent.TOUCH_TAP,t.onModeSelected,t)},t.prototype.onModeSelected=function(e){var t,n=this,r=new egret.Event(PlayEvents.START);switch(e.target){case n.btnMode1:t=GameMode.TIME_ATTACK;break;case n.btnMode2:t=GameMode.INFINITE;break;case n.btnMode3:t=GameMode.PRACTICE}r.data={mode:t},n.dispatchEvent(r)},t}(eui.Component);window.ModeSelectPanel=n,__reflect(n.prototype,"ModeSelectPanel",[])},function(e,t){var n=function(){function e(){this.data={deg:void 0,rad:void 0,spd:void 0,sin:void 0,cos:void 0},this._dx=0,this._dy=0}return Object.defineProperty(e.prototype,"speed",{get:function(){return this.data.spd},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sin",{get:function(){return this.data.sin},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cos",{get:function(){return this.data.cos},enumerable:!1,configurable:!0}),e.prototype.setData=function(e,t){var n=this.data;if(n.deg!=e||n.spd!=t){if(n.deg!=e){var r=e*Math.PI/180,i=Math.sin(r),o=Math.cos(r);n=__assign(__assign({},n),{deg:e,rad:r,sin:i,cos:o})}this._dx=t*n.sin,this._dy=t*n.cos,n=__assign(__assign({},n),{spd:t}),this.data=n}},e.prototype.getDAxis=function(){return{dx:this._dx,dy:-this._dy}},e}();window.MoveData=n,__reflect(n.prototype,"MoveData",[])},function(e,t){var n=function(e){function t(t){var n=e.call(this)||this;switch(t){case 0:n.skinName="resource/eui_skins/playerPlane.exml";break;case 1:n.skinName="resource/eui_skins/enemyPlane.exml";break;case 2:n.skinName="resource/eui_skins/elitePlane.exml";break;case 3:n.skinName="resource/eui_skins/extremeplane.exml"}return n}return __extends(t,e),t.prototype.setSpinState=function(e){if(e!=this.curSpin)switch(this.curSpin=e,e){case-1:this.currentState="lspin";break;case 0:this.currentState="normal";break;case 1:this.currentState="rspin"}},t}(eui.Component);window.PlaneDisp=n,__reflect(n.prototype,"PlaneDisp",[])},function(e,t){var n=function(e){function t(t,n,r){void 0===r&&(r=75);var i=e.call(this)||this;i.RADAR_OBJ_R=10;var o=2*r;return i.x=t-o,i.y=n,i.width=o,i.height=o,i._r=r,i._objs=[],i._radarObjs=[],i.draw(),i}return __extends(t,e),t.prototype.dispose=function(){this._radarObjs=null,this._objs=null,this.parent&&this.parent.removeChild(this)},t.prototype.draw=function(){var e=new egret.Bitmap(RES.getRes("sheet_json#radar"));e.width=this.width,e.height=this.height,this.addChild(e);var t=new egret.Sprite;t.width=this.width,t.height=this.height,t.x=t.width/2,t.y=t.height/2,t.anchorOffsetX=t.x,t.anchorOffsetY=t.y,t.graphics.beginFill(0,0),t.graphics.drawRect(0,0,t.width,t.height),t.graphics.endFill(),this._layer=t,this.addChild(t)},t.prototype.regPlayer=function(e){this._player=e},t.prototype.regObject=function(e){var t=this;if(t._objs){var n;e instanceof BasePlane?n=t.drawEnemey():e instanceof DummyTgt?n=t.drawEnemey():e instanceof Drift&&(n=t.drawDrift()),t._objs.push(e),t._radarObjs.push(n),t.calc(t._player,e,n),t._layer.addChild(n)}},t.prototype.removeObject=function(e){var t=this;this._objs.every(function(n,r){if(n==e){t._objs.splice(r,1);var i=t._radarObjs.splice(r,1)[0];return i.parent&&i.parent.removeChild(i),!1}return!0})},t.prototype.refresh=function(){var e=this;e._objs;e._objs.forEach(function(t,n){e.calc(e._player,t,e._radarObjs[n])}),e._layer.rotation=-e._player.rotation},t.prototype.calc=function(e,t,n){if(!e||!t)return-1;var r=this._r,i=this.RADAR_OBJ_R/2,o=e.position,a=t.position,s=egret.Point.distance(o,a),l=(a.x-o.x)/s,u=(a.y-o.y)/s,c=l*r,f=u*r;return n.x=Math.floor(r+c+i),n.y=Math.floor(r+f+i),1},t.prototype.drawEnemey=function(){var e=this.RADAR_OBJ_R,t=new egret.Shape;return t.graphics.beginFill(16729344),t.graphics.drawCircle(-e,-e,e),t.graphics.endFill(),t.cacheAsBitmap=!0,t},t.prototype.drawDrift=function(){var e=this.RADAR_OBJ_R,t=new egret.Shape;return t.graphics.beginFill(16766720),t.graphics.drawCircle(-e,-e,e),t.graphics.endFill(),t.cacheAsBitmap=!0,t},t}(egret.Sprite);window.Radar=n,__reflect(n.prototype,"Radar",[])},function(e,t){var n=function(e){function t(t,n){void 0===t&&(t=-1),void 0===n&&(n=0);var r=e.call(this)||this;return r._curSec=0,r._totSec=0,r._count=0,r.skinName="resource/eui_skins/TimeLimit.exml",r._fps=egret.MainContext.instance.stage.frameRate,r._step=t,r._triggerTime=n,r}return __extends(t,e),Object.defineProperty(t.prototype,"usedTime",{get:function(){return this._totSec+this._curSec*this._step},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"second",{set:function(e){this._totSec=e,this._curSec=e,this._count=0,this.refreshText()},enumerable:!1,configurable:!0}),t.prototype.refresh=function(){var e=this;return e._count++,e._count<e._fps?void 0:(e._count=0,e._curSec+=e._step,e.refreshText(),e._curSec==e._triggerTime?void e.dispatchEvent(new egret.Event(PlayEvents.GAME_OVER)):void(e._curSec%60==0&&e.dispatchEvent(new egret.Event(PlayEvents.RANK_UP))))},t.prototype.refreshText=function(){var e=this,t=Math.floor(e._curSec/60),n=e._curSec%60;e.txt&&(e.txt.text=t+":"+(10>n?"0"+n:n))},t}(eui.Component);window.TimeLimit=n,__reflect(n.prototype,"TimeLimit",[])},function(e,t){var n=function(){function e(e){var t=this;this.plane=e,this.positionData={},this.driftFirst=!1,this.startShotAngle=10,this.aicfg={shot:r.CEASE,rotation:i.STRAIGHT,speed:o.NORMAL};var n=egret.MainContext.instance.stage.frameRate;this.fps=n,this.counters=[function(){return 5*n},function(){return t.phrase2Counter},function(){return 3}],this.phraseTime=[-1,10*n,10*n],this.phrase=0,this.timeCounter=0}return e.prototype.delay=function(e){this.timeCounter+=e},e.prototype.refreshAI=function(e,t){var n=this,r={nextAct:!1,nextPhrase:!1};switch(n.positionData.tgt&&n.positionData.tgt.isActivated||n.targetCalc(e,t),n.phrase){case 0:n.timeCounter--,n.timeCounter<=0&&(n.driftFirst&&n.targetCalc(e,t),n.resetTimeCounter(),r=n.p0Test());break;case 1:if(n.phraseTimeCounter--,n.phraseTimeCounter<=0)return n.resetAI(),n.phrase=0,n.aicfg;n.timeCounter--,n.timeCounter<=0&&(n.resetTimeCounter(),r=n.p1Test());break;case 2:return n.phraseTimeCounter--,n.phraseTimeCounter<=0?(console.log("追击阶段结束"),n.resetAI(),r.nextPhrase=!0):(n.timeCounter--,n.timeCounter<=0&&(n.resetTimeCounter(),r=n.p2Test())),r.nextPhrase&&(console.log(n.aicfg),n.phrase=n.phrase==n.counters.length-1?0:n.phrase+1),n.aicfg}return r.nextPhrase?(n.phrase=n.phrase==n.counters.length?0:n.phrase+1,n.aicfg):r.nextAct?n.aicfg:null},e.prototype.p0Test=function(){var e=this,t=e.aicfg,n=t.shot,r=t.rotation,i=t.speed;switch(e.distanceCalc(),e.enemyRotationCalc(),e.angleCalc(),e.pr1DirectionCalc(),e.pr2LineCalc(),e.pr3SideCalc(),e.positionData.pr1){case a.SAME:switch(e.positionData.pr2){case s.BEHIND:i=o.FAST,r=e.getRotationSide(e.positionData.pr3,"out");break;case s.FRONT:i=o.NORMAL,r=e.getRotationSide(e.positionData.pr3,"in")}break;case a.DIFF:switch(e.positionData.pr2){case s.BEHIND:i=o.FAST,r=e.getRotationSide(e.positionData.pr3,"out");break;case s.FRONT:i=o.SLOW,r=e.getRotationSide(e.positionData.pr3,"in")}}return e.aicfg={shot:n,rotation:r,speed:i},{nextPhrase:!0,nextAct:!0}},e.prototype.p1Test=function(){var e=this,t=!1,n=e.aicfg,r=n.shot,o=n.rotation,a=n.speed;return e.distanceCalc(),e.enemyRotationCalc(),e.pr2LineCalc(),e.angleCalc(),e.positionData.angle<=45&&e.positionData.pr2==s.FRONT&&(e.positionData.distance<=e.plane.bulletRange?(e.pr3SideCalc(),o=e.getRotationSide(e.positionData.pr3,"in"),e.aicfg={shot:r,rotation:o,speed:a},t=!0):e.aicfg={shot:r,rotation:i.STRAIGHT,speed:a}),{nextPhrase:t,nextAct:!0}},e.prototype.p2Test=function(){var e=this,t=e.aicfg,n=t.shot,a=t.rotation,l=t.speed,u=!1,c=function(){n=r.CEASE,a=i.STRAIGHT,l=o.NORMAL};if(e.enemyRotationCalc(),!u){e.distanceCalc();var f=e.positionData.distance,h=e.plane.bulletRange;f>2*h?(console.log("距离过远结束追击"),c(),u=!0):l=f>h?o.FAST:o.NORMAL}return u||(e.pr2LineCalc(),e.positionData.pr2!=s.FRONT&&(console.log("机位超过目标结束追击"),c(),u=!0)),u||(e.angleCalc(),e.positionData.angle>45?(console.log("目标超出射程角度范围结束追击"),c(),u=!0):e.positionData.angle<=e.startShotAngle?(n=r.FIRE,l=o.NORMAL,a=i.STRAIGHT):n=r.CEASE),u||(e.pr3SideCalc(),a=e.getRotationSide(e.positionData.pr3,"in")),e.aicfg={shot:n,speed:l,rotation:a},{nextPhrase:u,nextAct:!0}},e.prototype.targetCalc=function(e,t){var n=this.plane,r=egret.Point.distance(e.position,n.position),i=e;if(this.driftFirst)for(var o=0,a=t;o<a.length;o++){var s=a[o],l=egret.Point.distance(s.position,n.position);r=l,i=s}this.positionData=__assign(__assign({},this.positionData),{distance:r,tgt:i})},e.prototype.distanceCalc=function(){var e=this.plane,t=this.positionData.tgt,n=egret.Point.distance(e.position,t.position);this.positionData=__assign(__assign({},this.positionData),{distance:n})},e.prototype.pr1DirectionCalc=function(){var e=(this.plane,this.positionData.tgt),t=this.positionData.enemyRotation,n=e.rotation<0?e.rotation+360:e.rotation,r=Math.abs(n-t);r=r>180?Math.abs(r-360):r;var i=90>=r,o=i?a.SAME:a.DIFF;this.positionData=__assign(__assign({},this.positionData),{pr1:o,playerRotation:n})},e.prototype.pr2LineCalc=function(){var e,t=this.plane,n=this.positionData.tgt,r=this.positionData.enemyRotation,i=Math.tan(r*Math.PI/180),o=t.y-i*t.x,a=i*n.x+o;e=90>r||r>270?n.y<a?s.FRONT:s.BEHIND:n.y>a?s.FRONT:s.BEHIND,this.positionData=__assign(__assign({},this.positionData),{pr2:e})},e.prototype.pr3SideCalc=function(){var e,t=this.plane,n=this.positionData.tgt,r=this.positionData.enemyRotation,i=-1/Math.tan(r*Math.PI/180),o=t.y-i*t.x,a=i*n.x+o;e=this.positionData.angle<5?l.STRAIGHT:r>=0&&180>r?n.y<a?l.LEFT:l.RIGHT:n.y>a?l.LEFT:l.RIGHT,this.positionData=__assign(__assign({},this.positionData),{pr3:e,k:i,b:o})},e.prototype.angleCalc=function(){var e=this.plane,t=this.positionData.tgt,n=this.positionData.enemyRotation,r=Math.tan(n*Math.PI/180),i=(t.y-e.y)/(t.x-e.x),o=Math.abs((r-i)/(1+r*i)),a=180*Math.atan(o)/Math.PI,s=90-a;this.positionData=__assign(__assign({},this.positionData),{angle:s})},e.prototype.enemyRotationCalc=function(){var e=this.plane,t=e.rotation<0?e.rotation+360:e.rotation;Math.abs(e.rotation)%90==0&&t++,this.positionData=__assign(__assign({},this.positionData),{enemyRotation:t})},e.prototype.getRotationSide=function(e,t){if(e==l.STRAIGHT)return i.STRAIGHT;if("out"==t){if(e==l.LEFT)return i.PLUS;if(e==l.RIGHT)return i.MINUS}else if("in"==t){if(e==l.LEFT)return i.MINUS;if(e==l.RIGHT)return i.PLUS}},Object.defineProperty(e.prototype,"phrase",{get:function(){return this._phrase},set:function(e){this._phrase=e,this.timeCounter=this.counters[e](),this.phraseTimeCounter=this.phraseTime[e]},enumerable:!1,configurable:!0}),e.prototype.resetTimeCounter=function(){this.timeCounter=this.counters[this._phrase]()},Object.defineProperty(e.prototype,"phrase2Counter",{get:function(){var e=this;return e.positionData.pr2==s.FRONT&&e.positionData.angle<=90?3:this.fps},enumerable:!1,configurable:!0}),e.prototype.resetAI=function(){this.aicfg={shot:r.CEASE,rotation:i.STRAIGHT,speed:o.NORMAL}},e}();window.AIConfig=n,__reflect(n.prototype,"AIConfig",[]);var r;!function(e){e[e.FIRE=0]="FIRE",e[e.CEASE=1]="CEASE"}(r||(r={})),window.AI_Shot=r;var i;!function(e){e[e.PLUS=0]="PLUS",e[e.STRAIGHT=1]="STRAIGHT",e[e.MINUS=2]="MINUS"}(i||(i={})),window.AI_Rotation=i;var o;!function(e){e[e.FAST=0]="FAST",e[e.NORMAL=1]="NORMAL",e[e.SLOW=2]="SLOW"}(o||(o={})),window.AI_Speed=o;var a;!function(e){e[e.SAME=0]="SAME",e[e.DIFF=1]="DIFF"}(a||(a={})),window.PosRelat_Direction=a;var s;!function(e){e[e.FRONT=0]="FRONT",e[e.BEHIND=1]="BEHIND"}(s||(s={})),window.PosRelat_LINE=s;var l;!function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT",e[e.STRAIGHT=2]="STRAIGHT"}(l||(l={})),window.PosRelat_SIDE=l},function(e,t){var n,n=window.CollisionUtils;!function(e){function t(e,t,n){var r=n.length;if(3>r)return!1;var i=0,o=[];for(i=0;i<n.length;i++){var a=new egret.Point(n[i].x,n[i].y);o.push(a)}for(i=0;i<o.length;i++)o[i].x+=t.x,o[i].y+=t.y;if(this.vectorCrossPoint(o[0],e,o[1])>0)return!1;if(this.vectorCrossPoint(o[0],e,o[r-1])<0)return!1;i=2;for(var s=r-1,l=-1;s>=i;){var u=i+s>>1;this.vectorCrossPoint(o[0],e,o[u])>0?(l=u,s=u-1):i=u+1}return 0>l?!1:this.vectorCrossPoint(o[l-1],e,o[l])<0}function n(e,t,n){return(t.x-e.x)*(n.y-e.y)-(n.x-e.x)*(t.y-e.y)}e.checkPointCollideShape=t,e.vectorCrossPoint=n}(n||(n={})),window.CollisionUtils=n},function(e,t){var n=function(){function e(){}return e}();window.Dialog=n,__reflect(n.prototype,"Dialog",[])},function(e,t){var n=function(){function e(){}return e.regist=function(){egret.lifecycle.onPause=this.onPause,egret.lifecycle.onResume=this.onResume},e.addFunc=function(t,n,i){e.map[t]=new r(n,i)},e.removeFunc=function(t){delete e.map[t]},e.onPause=function(){for(var t in e.map)e.map[t].onPause()},e.onResume=function(){for(var t in e.map)e.map[t].onResume()},e.map={},e}();window.LifecycleCallback=n,__reflect(n.prototype,"LifecycleCallback",[]);var r=function(){function e(e,t){this.onPause=e,this.onResume=t}return e}();window.LcyObj=r,__reflect(r.prototype,"LcyObj",[])},function(e,t){var n=function(){function e(){this.HTTP_URL="https://xxxx"}return e.prototype.dataFormat=function(e){if(e){var t=[];for(var n in e)t.push(n+"="+e[n]);return t.join("&")}return""},e.prototype.getToken=function(){return sessionStorage.getItem("token")},e.prototype.requestGetImg=function(e,t){var n=this;return new Promise(function(r,i){var o=new egret.HttpRequest;n.dataFormat(t);o.responseType=egret.HttpResponseType.TEXT,o.open(e,egret.HttpMethod.GET),o.send(),o.addEventListener(egret.Event.COMPLETE,function(e){r()},n),o.addEventListener(egret.IOErrorEvent.IO_ERROR,function(e){i(e)},n)})},e.prototype.requestGet=function(e,t){var n=this;return new Promise(function(r,i){var o=new egret.HttpRequest,a=n.dataFormat(__assign(__assign({},t),{ucode:n.getToken()}));o.responseType=egret.HttpResponseType.TEXT,o.open(n.HTTP_URL+e+"?"+a,egret.HttpMethod.GET),o.send(),o.addEventListener(egret.Event.COMPLETE,function(e){var t=e.currentTarget;r(JSON.parse(t.response))},n)})},e.prototype.requestPost=function(e,t){var n=this;return new Promise(function(r,i){var o=new egret.HttpRequest,a=n.dataFormat(__assign(__assign({},t),{ucode:n.getToken()}));o.responseType=egret.HttpResponseType.TEXT,o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.open(n.HTTP_URL+e,egret.HttpMethod.POST),o.send(a),o.addEventListener(egret.Event.COMPLETE,function(e){var t=e.currentTarget;t.response?r(JSON.parse(t.response)):(console.log("系统出错，请稍后再试"),i(e))},n),o.addEventListener(egret.IOErrorEvent.IO_ERROR,function(e){console.log("服务器连接失败，请稍后再试")},n)})},e}();window.RequestUtil=n,__reflect(n.prototype,"RequestUtil",[])},function(e,t){var n=function(){function e(){}return e.Debug=!1,e.env="pro",e}();window.Setting=n,__reflect(n.prototype,"Setting",[])},function(e,t){var n=function(){function e(){var e=this;LifecycleCallback.addFunc("bgm",function(){e.pause()},function(){e.resume()}),this._bgs={},this._defaultVolume=.5}return e.prototype.play=function(e,t){void 0===t&&(t=!0),this._bgm&&this._bgmChannel.stop(),this._bgm=RES.getRes(e),this._bgm.type=egret.Sound.MUSIC;try{if(this._isPausing)return;this._bgmChannel=this._bgm.play(0,t?0:1),this._bgmChannel.volume=this._defaultVolume}catch(n){console.error(n)}},e.prototype.playBgs=function(e){var t;t=this._bgs[e]?this._bgs[e]:RES.getRes(e),t&&t.play(0,1)},e.prototype.resume=function(){this._isPausing=!1,this._bgm&&this._bgmChannel&&(this._bgmChannel=this._bgm.play(this._bgmPosition,1),this._bgmChannel.volume=this._defaultVolume,this._bgmChannel.addEventListener(egret.Event.SOUND_COMPLETE,this.onResumeOver,this))},e.prototype.onResumeOver=function(e){this._bgm&&this._bgmChannel&&(this._bgmChannel=this._bgm.play(0,0),this._bgmChannel.volume=this._defaultVolume)},e.prototype.pause=function(){this._isPausing=!0,this._bgm&&this._bgmChannel&&(this._bgmPosition=this._bgmChannel.position,this._bgmChannel.stop())},e.prototype.stop=function(){this._bgm&&this._bgmChannel&&(this._bgmChannel.stop(),this._bgmChannel=null,this._bgm=null)},e.instance=function(){return e._ins||(e._ins=new e),e._ins},e}();window.SoundManager=n,__reflect(n.prototype,"SoundManager",[])},function(e,t){var n=function(){function e(e){this.p=e,console.log(e)}return e.print=function(e){Setting.Debug&&console.log(e)},e.addArmature=function(e,t){var n,r,i=RES.getRes(e.ske),o=RES.getRes(e.tex),a=RES.getRes(e.png),s=new dragonBones.EgretFactory,l=s.parseDragonBonesData(i);s.addDragonBonesData(l),s.addTextureAtlasData(s.parseTextureAtlasData(o,a)),n=s.buildArmature(l.armatureNames[0]),r=n.display,s.clock.add(n),t(n,r),egret.Ticker.getInstance().register(function(e){s.clock.advanceTime(1e-4)},this)},e.onTicker=function(e){this._time||(this._time=e);var t=e,n=t-this._time;return this._time=t,dragonBones.WorldClock.clock.advanceTime(n/1e3),!1},e.RoundRect=function(e,t,n){void 0===n&&(n=10);var r=new egret.Shape;r.graphics.beginFill(2631720),r.graphics.drawRoundRect(0,0,e.width,e.height,n,n),r.graphics.endFill(),r.y=e.x,r.x=e.y,t.addChild(r),e.mask=r},e.pressBtn=function(e,t){e.addEventListener(egret.TouchEvent.TOUCH_END,function(){t&&t()},this)},e.touchBtn=function(e,t,n){e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,function(){egret.Tween.get(e).to({scaleX:.8,scaleY:.8},80,egret.Ease.cubicIn).call(function(){n&&n()})},this),e.addEventListener(egret.TouchEvent.TOUCH_END,function(){egret.Tween.get(e).to({scaleX:1,scaleY:1},100,egret.Ease.cubicIn).call(function(){egret.Tween.removeTweens(e),t&&t()})},this),e.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,function(){egret.Tween.get(e).to({scaleX:1,scaleY:1},100,egret.Ease.cubicIn).call(function(){egret.Tween.removeTweens(e),t&&t()})})},e.itemTap=function(e,t){e.addEventListener(eui.ItemTapEvent.ITEM_TAP,function(n){var r=-1!=e.selectedIndex?e.selectedIndex:null,i=e.$indexToRenderer[r].$children[0];egret.Tween.get(i).to({scaleX:.9,scaleY:.9},80).to({scaleX:1,scaleY:1},50).call(function(){t&&t(e.selectedItem,r),egret.Tween.removeTweens(i)})},this)},e.ListChildClick=function(t,n,r){var i=t.$indexToRenderer;i.forEach(function(t,i){var o=t.$children[0],a=o.$children[n];e.touchBtn(a,function(){r(o,i)})})},e.dargMove=function(e,t,n,r,i,o,a){function s(e){if(f)if(2==d){if(2==c.names.length){c[e.touchPointID].x=e.stageX,c[e.touchPointID].y=e.stageY;var n=l();a&&a(n/p,_)}}else t.x=e.stageX-h.x,t.y=e.stageY-h.y,_.x=t.x,_.y=t.y,i&&i(function(e){f=e,(f=!1)&&(c={names:[]},d=0)})}function l(){var e=0,t=c.names;return e=egret.Point.distance(c[t[t.length-1]],c[t[t.length-2]])}var u=this;void 0===n&&(n=!1);var c={names:[]},f=!1,h=new egret.Point,p=0,d=0,_={x:t.x,y:t.y};t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,function(i){null==c[i.touchPointID]&&1==n&&(c[i.touchPointID]=new egret.Point(i.stageX,i.stageY),c.names.push(i.touchPointID)),f=!0,d++,2==d?p=l():(h.x=i.stageX-t.x,h.y=i.stageY-t.y,r&&r(h)),e.addEventListener(egret.TouchEvent.TOUCH_MOVE,s,u)},this),t.addEventListener(egret.TouchEvent.TOUCH_END,function(t){f=!1,c={names:[]},d=0,o&&o(),e.removeEventListener(egret.TouchEvent.TOUCH_MOVE,s,u)},this)},e.createBitmapByName=function(e){var t=new egret.Bitmap,n=RES.getRes(e);return t.texture=n,t.texture},e.deepCopyObj=function(e){var t=Array.isArray(e)?[]:{};for(var n in e)e.hasOwnProperty(n)&&("object"==typeof e[n]&&null!==e[n]?t[n]=this.deepCopyObj(e[n]):t[n]=e[n]);
return t},e.getUrlParam=function(e,t){var n=new RegExp("(\\?|&)"+e+"=([^&#]*)"),r=n.exec(t?t:location.href);return null!=r?decodeURIComponent(r[2]):null},e}();window.Tool=n,__reflect(n.prototype,"Tool",[])}]);